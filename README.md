# Dating Bot & WebApp

Набор инструментов для запуска Telegram-бота знакомств с мини-приложением. Репозиторий
содержит Python-пакет `bot` и статическую веб-часть для WebApp.

## Возможности

- Telegram-бот на базе `aiogram` с опросом /start.
- Хранение анкет в JSON-файле и простая логика взаимного подбора.
- Расширенные профили: геолокация, интересы, цели знакомства и фото (файл или ссылка).
- Интеграция мини-приложения: кнопка в боте открывает WebApp, который отправляет
  анкету обратно боту.
- WebApp с клиентской валидацией, подсказками по заполнению, прогресс-баром и
  автосохранением черновика анкеты.

## Требования

- Python 3.11+
- `pip` и `virtualenv` / `venv`
- Аккаунт Telegram для регистрации бота через [@BotFather](https://t.me/BotFather)
- Веб-сервер или хостинг для раздачи содержимого каталога `webapp/`

## Установка зависимостей

```bash
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\\Scripts\\activate
pip install --upgrade pip
pip install aiogram~=3.3
```

## Конфигурация

Бот использует переменные окружения. Создайте файл `.env` или настройте окружение
в процессе деплоя:

- `BOT_TOKEN` — токен, полученный у BotFather (обязательный).
- `WEBAPP_URL` — публичный URL, где будет доступен миниапп (например,
  `https://example.com/webapp/index.html`).
- `BOT_STORAGE_PATH` — путь до файла для сохранения анкет. По умолчанию данные
  хранятся только в оперативной памяти.

Пример запуска с переменными окружения:

```bash
export BOT_TOKEN="1234567890:ABC..."
export WEBAPP_URL="https://example.com/webapp/index.html"
export BOT_STORAGE_PATH="data/profiles.json"
```

## Запуск локально

1. Активируйте виртуальное окружение и установите зависимости.
2. Задайте переменные окружения.
3. Выполните команду:

   ```bash
   python -m bot.main
   ```

Бот запустится в режиме long polling. В Telegram отправьте `/start` своему боту,
чтобы пройти анкету. Можно заполнить её вручную или через кнопку мини-приложения.

## Мини-приложение

Содержимое каталога `webapp/` — статический HTML/JS. Его можно раздавать с любого
веб-сервера (Nginx, GitHub Pages, Firebase Hosting и т.д.). После деплоя укажите URL
в переменной `WEBAPP_URL`, чтобы кнопка в боте открывала миниапп.

WebApp уже включает интерактивную валидацию, подсказки, прогресс-бар заполнения
и автосохранение черновика анкеты в `localStorage`. Дополнительно можно
расширить мини-приложение загрузкой фотографий или связью с backend.

## Деплой

- **Бот**. Популярные варианты — Docker-контейнер на VPS, Railway.app, Render.com
  или любой сервер с поддержкой Python. Главное — настроить переменные окружения
  и процесс мониторинга (systemd, supervisor, Docker restart policy).
- **WebApp**. Разместите статические файлы в выбранном CDN/хостинге и убедитесь,
  что URL доступен по HTTPS.

## Структура репозитория

```
.
├── bot/
│   ├── __init__.py
│   ├── config.py
│   └── main.py
├── webapp/
│   ├── css/
│   │   └── style.css
│   ├── js/
│   │   └── app.js
│   └── index.html
└── README.md
```

## Полезные команды

```bash
python -m bot.main       # запуск бота
pre-commit run --all-files  # если добавите pre-commit хуки
```

Готово! Дополняйте проект по своим требованиям: подключайте БД, добавляйте
аналитику, интегрируйте платёжные сервисы.


## Бэклог развития

Подробная дорожная карта и идеи по развитию вынесены в отдельный файл
[`BACKLOG.md`](./BACKLOG.md). Там собраны инициативы по функциональности,
бизнес-логике, UI/UX и инфраструктуре, распределённые по спринтам.
