# Dating Bot Environment Configuration
# Copy this file to .env and update the values before running the application.

# ============================================================================
# BOT CONFIGURATION (Required)
# ============================================================================

# Telegram Bot Token (required)
# Get this from @BotFather on Telegram
# Format: <numeric_id>:<alphanumeric_hash>
# Example: 123456789:ABCdefGHIjklMNOpqrsTUVwxyz-1234567
BOT_TOKEN=your-telegram-bot-token-here

# JWT Secret Key (required for production)
# Generate a strong random string for signing JWT tokens
# Example: python -c "import secrets; print(secrets.token_urlsafe(32))"
# For development, a temporary secret will be generated if not set
JWT_SECRET=your-jwt-secret-key-here

# Webapp URL (required for production)
# Public HTTPS URL where the Telegram Mini App is hosted
# Must use HTTPS protocol for production deployments
# For local development, use https://localhost
WEBAPP_URL=https://your-domain.com

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL Connection for Docker Compose
# These are used by the postgres container and to build BOT_DATABASE_URL
POSTGRES_DB=dating
POSTGRES_USER=dating

# IMPORTANT: Use only alphanumeric characters (A-Z, a-z, 0-9) for the password
# Special characters require URL encoding and may cause authentication issues
# If you change the password after initial deployment, you must reset the database:
#   docker compose down -v && docker compose up
POSTGRES_PASSWORD=dating
POSTGRES_PORT=5432

# Direct Database URL (optional)
# Format: postgresql+asyncpg://user:password@host:port/database
# If not set, the bot will automatically construct the URL from POSTGRES_USER,
# POSTGRES_PASSWORD, and POSTGRES_DB (with optional POSTGRES_HOST and POSTGRES_PORT).
# This is useful when running in Docker Compose where these variables are already set.
# 
# For running outside Docker Compose, you can either:
# 1. Set BOT_DATABASE_URL directly (recommended for special characters in password)
# 2. Set POSTGRES_* variables and let the bot construct the URL automatically
#
# If the password contains special characters, they must be URL-encoded:
#   from urllib.parse import quote_plus
#   password_encoded = quote_plus('my@password!')
# BOT_DATABASE_URL=postgresql+asyncpg://dating:dating@localhost:5432/dating

# ============================================================================
# WEB APPLICATION CONFIGURATION
# ============================================================================

# Domain for the webapp (required for production HTTPS)
# This should be the public domain name where your app is hosted
# Used by Traefik to generate SSL certificates
DOMAIN=your-domain.com

# ACME (Let's Encrypt) email for certificate notifications
# Required for production HTTPS certificate generation
ACME_EMAIL=admin@your-domain.com

# ACME CA Server (optional)
# For testing, use Let's Encrypt staging server to avoid rate limits:
# ACME_CA_SERVER=https://acme-staging-v02.api.letsencrypt.org/directory
# For production, leave empty or use:
# ACME_CA_SERVER=https://acme-v02.api.letsencrypt.org/directory

# HTTP and HTTPS ports (optional)
# Only change if you need to use non-standard ports
HTTP_PORT=80
HTTPS_PORT=443

# Port for the nginx webapp container
# Default: 80 (standard HTTP port)
# Change this if port 80 is already in use on your server
# Note: The webapp service is optional and disabled by default.
# To enable: docker compose --profile webapp up -d
WEBAPP_PORT=80

# ============================================================================
# DEPLOYMENT & OPERATIONS
# ============================================================================

# Database migrations
# Set to 'false' to skip automatic migrations on container startup
# RUN_DB_MIGRATIONS=true

# Debug logging
# Set to 'true', '1', or 'yes' to enable DEBUG level logging
# DEBUG=false


# ============================================================================
# PHOTO STORAGE CONFIGURATION
# ============================================================================

# Path where photos are stored on the server (inside container)
PHOTO_STORAGE_PATH=/app/photos

# Optional: CDN URL for serving photos (leave empty for local serving)
# When set, photos will be served from CDN instead of local API server
# Example: PHOTO_CDN_URL=https://cdn.example.com
PHOTO_CDN_URL=

# API Server Configuration
API_HOST=0.0.0.0
API_PORT=8080

# NSFW Detection Configuration
# Threshold for NSFW detection (0.0-1.0, higher = stricter)
# 0.7 = balanced (recommended)
# 0.5 = permissive
# 0.9 = very strict
NSFW_THRESHOLD=0.7
