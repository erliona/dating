<template>
  <div class="step-interests">
    <div class="step-header">
      <h2>–í–∞—à–∏ –∏–Ω—Ç–µ—Ä–µ—Å—ã</h2>
      <p>–í—ã–±–µ—Ä–∏—Ç–µ –¥–æ 10 –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</p>
    </div>

    <div class="step-content">
      <div class="interests-grid">
        <label 
          v-for="interest in interests" 
          :key="interest.value"
          class="interest-item"
          :class="{ 'selected': localData.interests.includes(interest.value) }"
        >
          <input
            v-model="localData.interests"
            type="checkbox"
            :value="interest.value"
            :disabled="!localData.interests.includes(interest.value) && localData.interests.length >= 10"
          />
          <span class="interest-label">
            <span class="interest-icon">{{ interest.icon }}</span>
            {{ interest.label }}
          </span>
        </label>
      </div>

      <div class="selection-info">
        –í—ã–±—Ä–∞–Ω–æ: {{ localData.interests.length }}/10
      </div>
    </div>
  </div>
</template>

<script setup>
import { ref, watch } from 'vue'

const props = defineProps({
  modelValue: {
    type: Object,
    required: true
  }
})

const emit = defineEmits(['update:modelValue'])

const localData = ref({ ...props.modelValue })

const interests = [
  { value: 'music', label: '–ú—É–∑—ã–∫–∞', icon: 'üéµ' },
  { value: 'movies', label: '–ö–∏–Ω–æ', icon: 'üé¨' },
  { value: 'books', label: '–ö–Ω–∏–≥–∏', icon: 'üìö' },
  { value: 'travel', label: '–ü—É—Ç–µ—à–µ—Å—Ç–≤–∏—è', icon: '‚úàÔ∏è' },
  { value: 'sports', label: '–°–ø–æ—Ä—Ç', icon: '‚öΩ' },
  { value: 'fitness', label: '–§–∏—Ç–Ω–µ—Å', icon: 'üí™' },
  { value: 'cooking', label: '–ö—É–ª–∏–Ω–∞—Ä–∏—è', icon: 'üë®‚Äçüç≥' },
  { value: 'art', label: '–ò—Å–∫—É—Å—Å—Ç–≤–æ', icon: 'üé®' },
  { value: 'photography', label: '–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è', icon: 'üì∏' },
  { value: 'gaming', label: '–ò–≥—Ä—ã', icon: 'üéÆ' },
  { value: 'dancing', label: '–¢–∞–Ω—Ü—ã', icon: 'üíÉ' },
  { value: 'nature', label: '–ü—Ä–∏—Ä–æ–¥–∞', icon: 'üåø' },
  { value: 'animals', label: '–ñ–∏–≤–æ—Ç–Ω—ã–µ', icon: 'üêï' },
  { value: 'technology', label: '–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏', icon: 'üíª' },
  { value: 'fashion', label: '–ú–æ–¥–∞', icon: 'üëó' },
  { value: 'cars', label: '–ê–≤—Ç–æ–º–æ–±–∏–ª–∏', icon: 'üöó' },
  { value: 'yoga', label: '–ô–æ–≥–∞', icon: 'üßò' },
  { value: 'reading', label: '–ß—Ç–µ–Ω–∏–µ', icon: 'üìñ' },
  { value: 'writing', label: '–ü–∏—Å—å–º–æ', icon: '‚úçÔ∏è' },
  { value: 'volunteering', label: '–í–æ–ª–æ–Ω—Ç–µ—Ä—Å—Ç–≤–æ', icon: 'ü§ù' },
  { value: 'meditation', label: '–ú–µ–¥–∏—Ç–∞—Ü–∏—è', icon: 'üßò‚Äç‚ôÄÔ∏è' },
  { value: 'board_games', label: '–ù–∞—Å—Ç–æ–ª—å–Ω—ã–µ –∏–≥—Ä—ã', icon: 'üé≤' },
  { value: 'hiking', label: '–ü–æ—Ö–æ–¥—ã', icon: 'ü•æ' },
  { value: 'swimming', label: '–ü–ª–∞–≤–∞–Ω–∏–µ', icon: 'üèä' },
  { value: 'cycling', label: '–í–µ–ª–æ—Å–ø–æ—Ä—Ç', icon: 'üö¥' },
  { value: 'running', label: '–ë–µ–≥', icon: 'üèÉ' },
  { value: 'painting', label: '–ñ–∏–≤–æ–ø–∏—Å—å', icon: 'üñåÔ∏è' },
  { value: 'gardening', label: '–°–∞–¥–æ–≤–æ–¥—Å—Ç–≤–æ', icon: 'üå±' },
  { value: 'wine', label: '–í–∏–Ω–æ', icon: 'üç∑' }
]

watch(localData, (newValue) => {
  emit('update:modelValue', newValue)
}, { deep: true })
</script>

<style scoped>
.step-interests {
  max-width: 400px;
  margin: 0 auto;
}

.step-header {
  text-align: center;
  margin-bottom: var(--spacing-xl);
}

.step-header h2 {
  font-size: var(--font-size-xxl);
  font-weight: var(--font-weight-bold);
  color: var(--text-primary);
  margin-bottom: var(--spacing-sm);
}

.step-header p {
  color: var(--text-secondary);
  margin-bottom: 0;
}

.interests-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--spacing-sm);
  margin-bottom: var(--spacing-lg);
}

.interest-item {
  display: flex;
  align-items: center;
  cursor: pointer;
}

.interest-item input[type="checkbox"] {
  display: none;
}

.interest-label {
  display: flex;
  align-items: center;
  width: 100%;
  padding: var(--spacing-sm) var(--spacing-md);
  border: 2px solid var(--border-color);
  border-radius: var(--border-radius-small);
  background-color: var(--bg-primary);
  transition: all var(--transition-fast);
  cursor: pointer;
  font-size: var(--font-size-sm);
}

.interest-item.selected .interest-label {
  border-color: var(--primary-color);
  background-color: rgba(255, 107, 107, 0.05);
}

.interest-item:not(.selected) .interest-label:hover {
  border-color: var(--primary-color);
  transform: translateY(-1px);
}

.interest-item input[type="checkbox"]:disabled + .interest-label {
  opacity: 0.5;
  cursor: not-allowed;
}

.interest-icon {
  font-size: var(--font-size-md);
  margin-right: var(--spacing-sm);
}

.selection-info {
  text-align: center;
  font-size: var(--font-size-sm);
  color: var(--text-secondary);
  font-weight: var(--font-weight-medium);
}
</style>
