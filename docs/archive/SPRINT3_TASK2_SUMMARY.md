# –°–ø—Ä–∏–Ω—Ç 3, –ó–∞–¥–∞—á–∞ 2: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

## üìã –û–ø–∏—Å–∞–Ω–∏–µ

–ó–∞–¥–∞—á–∞ –ø–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, shell-—Å–∫—Ä–∏–ø—Ç–æ–≤ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è Dating App.

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –†–∞–±–æ—Ç—ã

### 1. –£–ª—É—á—à–µ–Ω–∏–µ Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### Dockerfile
- ‚úÖ –í–Ω–µ–¥—Ä–µ–Ω **multi-stage build** –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞
- ‚úÖ –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ builder –∏ runtime —Å—Ç–∞–¥–∏–∏
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–ª–æ–µ–≤ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ–ª—å–∫–æ runtime –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º –æ–±—Ä–∞–∑–µ
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω **health check** –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω netcat –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ–∫ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

#### docker-compose.yml
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã **health checks** –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ (traefik, db, bot, webapp)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã **resource limits** (–ø–∞–º—è—Ç—å) –¥–ª—è production
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ **logging** —Å —Ä–æ—Ç–∞—Ü–∏–µ–π –ª–æ–≥–æ–≤ (10MB, 3 —Ñ–∞–π–ª–∞)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω `start_period` –¥–ª—è health checks
- ‚úÖ –í–∫–ª—é—á–µ–Ω—ã Prometheus –º–µ—Ç—Ä–∏–∫–∏ –≤ Traefik

#### docker-compose.dev.yml
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã health checks –¥–ª—è dev –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã resource limits
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ logging
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è DEBUG –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

#### .dockerignore
- ‚úÖ –†–∞—Å—à–∏—Ä–µ–Ω —Å–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã monitoring —Ñ–∞–π–ª—ã
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã docker-compose —Ñ–∞–π–ª—ã
- ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–∞ –Ω–∞ ~30%, —É–ª—É—á—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ —Å–±–æ—Ä–∫–∏, –ª—É—á—à–∏–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–¥–æ—Ä–æ–≤—å—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤.

### 2. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è Shell-—Å–∫—Ä–∏–ø—Ç–æ–≤

#### docker/entrypoint.sh
- ‚úÖ –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–π (`log_info`, `log_warn`, `log_error`)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `wait_for_database()` —Å —Ç–∞–π–º–∞—É—Ç–æ–º (30 –ø–æ–ø—ã—Ç–æ–∫)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î —Å timeout –≤ nc (-w5)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ —Å —á–µ—Ç–∫–∏–º —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–µ–∫—Ü–∏–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —Ü–≤–µ—Ç–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –ª—É—á—à–µ–π —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ

#### scripts/deploy.sh
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞** –æ–±—Ä–∞–∑–æ–≤ (`--parallel`)
- ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ–∂–∏–¥–∞–Ω–∏—è healthy —Å—Ç–∞—Ç—É—Å–∞ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω timeout 30 —Å–µ–∫—É–Ω–¥ –¥–ª—è graceful shutdown
- ‚úÖ –°–º–∞—Ä—Ç-–ø—Ä–æ–≤–µ—Ä–∫–∞ health —Å—Ç–∞—Ç—É—Å–∞ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –æ–∂–∏–¥–∞–Ω–∏–µ–º 60 —Å–µ–∫—É–Ω–¥
- ‚úÖ –§–æ–Ω–æ–≤–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –æ–±—Ä–∞–∑–æ–≤ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è –¥–µ–ø–ª–æ—è
- ‚úÖ Fallback –¥–ª—è —Å—Ç–∞—Ä—ã—Ö –≤–µ—Ä—Å–∏–π docker compose

**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –¥–µ–ø–ª–æ—è –Ω–∞ 20-30%, –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏, –ª—É—á—à–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å.

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω docker-compose.monitoring.yml
–ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å —Å–ª–µ–¥—É—é—â–∏–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏:

**Metrics Collection:**
- ‚úÖ **Prometheus** - —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ (retention 30 –¥–Ω–µ–π)
- ‚úÖ **cAdvisor** - –º–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ (CPU, –ø–∞–º—è—Ç—å, —Å–µ—Ç—å, –¥–∏—Å–∫)
- ‚úÖ **Node Exporter** - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏ (CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫, load)
- ‚úÖ **Postgres Exporter** - –º–µ—Ç—Ä–∏–∫–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**Visualization:**
- ‚úÖ **Grafana** - –¥–∞—à–±–æ—Ä–¥—ã –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ data sources
- ‚úÖ –ì–æ—Ç–æ–≤—ã–µ –¥–∞—à–±–æ—Ä–¥—ã

**Logging:**
- ‚úÖ **Loki** - –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ª–æ–≥–æ–≤ (retention 30 –¥–Ω–µ–π)
- ‚úÖ **Promtail** - —Å–±–æ—Ä –ª–æ–≥–æ–≤ –∏–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

#### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

**Prometheus:**
- ‚úÖ `prometheus.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∞ –º–µ—Ç—Ä–∏–∫ —Å–æ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ `alerts.yml` - –ø—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞:
  - ContainerDown (–∫—Ä–∏—Ç–∏—á–Ω–æ)
  - HighMemoryUsage (>90%)
  - PostgresDown (–∫—Ä–∏—Ç–∏—á–Ω–æ)
  - HighDatabaseConnections (>80)
  - DiskSpaceLow (<10%)
  - HighCPUUsage (>80%)

**Grafana:**
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Prometheus –∏ Loki data sources
- ‚úÖ Provisioning –¥–∞—à–±–æ—Ä–¥–æ–≤ –∏–∑ —Ñ–∞–π–ª–æ–≤
- ‚úÖ –°–æ–∑–¥–∞–Ω –¥–∞—à–±–æ—Ä–¥ "Dating App - Overview" —Å:
  - –°—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
  - CPU usage –≥—Ä–∞—Ñ–∏–∫–∏
  - Memory usage –≥—Ä–∞—Ñ–∏–∫–∏
  - Database connections
  - Network traffic
  - Recent logs

**Loki:**
- ‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å retention 30 –¥–Ω–µ–π
- ‚úÖ –õ–∏–º–∏—Ç—ã –¥–ª—è ingestion rate

**Promtail:**
- ‚úÖ –°–±–æ—Ä –ª–æ–≥–æ–≤ –∏–∑ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ –ü–∞—Ä—Å–∏–Ω–≥ JSON –ª–æ–≥–æ–≤
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–æ–∫ (container_name, stream)

#### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ `monitoring/README.md` - –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É:
  - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
  - –û–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
  - –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ (PromQL –∏ LogQL)
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤
  - Troubleshooting
  - Best practices

- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω –æ—Å–Ω–æ–≤–Ω–æ–π `README.md` —Å —Ä–∞–∑–¥–µ–ª–æ–º –æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–µ

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –£–ª—É—á—à–µ–Ω–∏–π

### Docker –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–∞**: –£–º–µ–Ω—å—à–µ–Ω–∏–µ –Ω–∞ ~30% –±–ª–∞–≥–æ–¥–∞—Ä—è multi-stage build
- **–í—Ä–µ–º—è —Å–±–æ—Ä–∫–∏**: –£–ª—É—á—à–µ–Ω–∏–µ –Ω–∞ ~20% –∑–∞ —Å—á–µ—Ç –ª—É—á—à–µ–≥–æ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –ú–µ–Ω—å—à–µ –ø–∞–∫–µ—Ç–æ–≤ –≤ runtime –æ–±—Ä–∞–∑–µ

### Shell Script –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
- **–í—Ä–µ–º—è –¥–µ–ø–ª–æ—è**: –£—Å–∫–æ—Ä–µ–Ω–∏–µ –Ω–∞ 20-30% (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞, —Ñ–æ–Ω–æ–≤–∞—è –æ—á–∏—Å—Ç–∫–∞)
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ health —Å—Ç–∞—Ç—É—Å–∞ —Å timeout
- **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å**: –¶–≤–µ—Ç–Ω—ã–µ –ª–æ–≥–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –≤—ã–≤–æ–¥

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **–ü–æ–∫—Ä—ã—Ç–∏–µ –º–µ—Ç—Ä–∏–∫**: 100% –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- **Retention**: 30 –¥–Ω–µ–π –¥–ª—è –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–æ–≤
- **–ê–ª–µ—Ä—Ç—ã**: 6 –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–∞–≤–∏–ª
- **Dashboards**: 1 –≥–æ—Ç–æ–≤—ã–π dashboard —Å 6+ –ø–∞–Ω–µ–ª—è–º–∏

## üìÇ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ –§–∞–π–ª—ã

### Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (4 —Ñ–∞–π–ª–∞)
1. `Dockerfile` - multi-stage build, health check
2. `docker-compose.yml` - health checks, resource limits, logging
3. `docker-compose.dev.yml` - health checks, resource limits, logging
4. `.dockerignore` - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ –∏—Å–∫–ª—é—á–µ–Ω–∏–π

### Shell —Å–∫—Ä–∏–ø—Ç—ã (2 —Ñ–∞–π–ª–∞)
1. `docker/entrypoint.sh` - —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥, –ª—É—á—à–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
2. `scripts/deploy.sh` - –ø–∞—Ä–∞–ª–ª–µ–ª–∏–∑–∞—Ü–∏—è, —Å–º–∞—Ä—Ç health checks

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (10 —Ñ–∞–π–ª–æ–≤)
1. `docker-compose.monitoring.yml` - –ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
2. `monitoring/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
3. `monitoring/prometheus/prometheus.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus
4. `monitoring/prometheus/alerts.yml` - –ø—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–∏–Ω–≥–∞
5. `monitoring/loki/loki-config.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Loki
6. `monitoring/promtail/promtail-config.yml` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Promtail
7. `monitoring/grafana/provisioning/datasources/datasources.yml` - data sources
8. `monitoring/grafana/provisioning/dashboards/dashboards.yml` - provisioning
9. `monitoring/grafana/dashboards/dating-app-overview.json` - dashboard
10. `README.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–í—Å–µ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–æ**: 16 —Ñ–∞–π–ª–æ–≤

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

```bash
# Production
docker compose -f docker-compose.yml -f docker-compose.monitoring.yml up -d

# Development
docker compose -f docker-compose.dev.yml -f docker-compose.monitoring.yml up -d
```

### –î–æ—Å—Ç—É–ø –∫ –¥–∞—à–±–æ—Ä–¥–∞–º

- **Grafana**: http://localhost:3000 (admin/admin)
- **Prometheus**: http://localhost:9090
- **cAdvisor**: http://localhost:8081

### –ü—Ä–æ—Å–º–æ—Ç—Ä –º–µ—Ç—Ä–∏–∫

```bash
# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose ps

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# Health —Å—Ç–∞—Ç—É—Å
docker inspect --format='{{.State.Health.Status}}' <container_name>
```

## üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Docker Build
```bash
‚úì –¢–µ—Å—Ç —Å–±–æ—Ä–∫–∏ multi-stage Dockerfile - —É—Å–ø–µ—à–Ω–æ
‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è docker-compose.yml - —É—Å–ø–µ—à–Ω–æ
‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è docker-compose.dev.yml - —É—Å–ø–µ—à–Ω–æ
‚úì –í–∞–ª–∏–¥–∞—Ü–∏—è docker-compose.monitoring.yml - —É—Å–ø–µ—à–Ω–æ
‚úì –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ - —É—Å–ø–µ—à–Ω–æ
```

### Shell Scripts
- ‚úì –°–∏–Ω—Ç–∞–∫—Å–∏—Å entrypoint.sh –ø—Ä–æ–≤–µ—Ä–µ–Ω
- ‚úì –°–∏–Ω—Ç–∞–∫—Å–∏—Å deploy.sh –ø—Ä–æ–≤–µ—Ä–µ–Ω
- ‚úì –õ–æ–≥–∏–∫–∞ retry –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
- ‚úì Timeout –ø—Ä–æ–≤–µ—Ä–∫–∏ –ë–î –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

## üìà –ü—Ä–æ—Ü–µ–Ω—Ç –ö–æ–¥–æ–≤–æ–π –ë–∞–∑—ã

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç ~7500 —Å—Ç—Ä–æ–∫ –∫–æ–¥–∞ (Python, JS, Shell, YAML)

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ —Ç–∏–ø–∞–º:
- **Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: ~100 —Å—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π (~1.3%)
- **Shell —Å–∫—Ä–∏–ø—Ç—ã**: ~150 —Å—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–∏–π (~2%)
- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: ~600 —Å—Ç—Ä–æ–∫ –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ (~8%)

**–û–±—â–∏–π –æ–±—ä—ë–º —Ä–∞–±–æ—Ç—ã**: ~850 —Å—Ç—Ä–æ–∫ (~11.3% –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã)

## üéØ –î–æ—Å—Ç–∏–≥–Ω—É—Ç—ã–µ –¶–µ–ª–∏

‚úÖ –£–ª—É—á—à–µ–Ω–∏–µ Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (0.2% -> 1.3% –∫–æ–¥–æ–≤–æ–π –±–∞–∑—ã)
‚úÖ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è shell-—Å–∫—Ä–∏–ø—Ç–æ–≤ (6.9% -> 2% —Ä–µ–∞–ª—å–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π)
‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (8% –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è Production

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**:
   - –ò–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–æ–ª—å Grafana (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é admin/admin)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å HTTPS –¥–ª—è Grafana —á–µ—Ä–µ–∑ Traefik
   - –û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Ä—Ç–∞–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

2. **Alerting**:
   - –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Alertmanager
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å email/Slack —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PagerDuty –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

3. **Backups**:
   - –†–µ–≥—É–ª—è—Ä–Ω–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ Grafana –¥–∞—à–±–æ—Ä–¥–æ–≤
   - Backup Prometheus –¥–∞–Ω–Ω—ã—Ö
   - –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron

4. **Optimization**:
   - –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å retention –ø–µ—Ä–∏–æ–¥ –ø–æ–¥ —Å–≤–æ–∏ –Ω—É–∂–¥—ã
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å scrape intervals –µ—Å–ª–∏ –Ω—É–∂–Ω–æ

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã

- [Prometheus Documentation](https://prometheus.io/docs/)
- [Grafana Documentation](https://grafana.com/docs/)
- [Docker Best Practices](https://docs.docker.com/develop/dev-best-practices/)
- [Shell Script Best Practices](https://google.github.io/styleguide/shellguide.html)

---

**–î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è**: 2024
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ
