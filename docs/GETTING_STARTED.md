# üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–≠—Ç–æ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –±—ã—Å—Ç—Ä–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å Dating Bot –Ω–∞ –≤–∞—à–µ–π –º–∞—à–∏–Ω–µ.

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker –∏ Docker Compose (v2.0+)
- Telegram Bot Token –æ—Ç [@BotFather](https://t.me/BotFather)
- (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–º–µ–Ω —Å SSL –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ—è

## –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (5 –º–∏–Ω—É—Ç)

### 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

```bash
git clone https://github.com/erliona/dating.git
cd dating
```

### 2. –°–æ–∑–¥–∞–π—Ç–µ .env —Ñ–∞–π–ª

```bash
cp .env.example .env
```

### 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ BOT_TOKEN

–û—Ç–∫—Ä–æ–π—Ç–µ `.env` –∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à —Ç–æ–∫–µ–Ω –±–æ—Ç–∞:

```env
BOT_TOKEN=123456789:ABCdefGHIjklMNOpqrsTUVwxyz
```

### 4. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–±–µ–∑ HTTPS)
docker compose -f docker-compose.dev.yml up -d

# –ò–ª–∏ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º (—Å HTTPS —á–µ—Ä–µ–∑ Traefik)
docker compose up -d
```

### 5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

```bash
# –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
docker compose ps

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–æ—Ç–∞
docker compose logs -f bot
```

### 6. –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ Telegram

–ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –ø–æ –∏–º–µ–Ω–∏ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`

---

## –ü—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ–π —á–µ—Ä–µ–∑ CI/CD (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π)

### 1. –§–æ—Ä–∫–Ω–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ –≤–∞—à–µ–º GitHub –∞–∫–∫–∞—É–Ω—Ç–µ.

### 2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ GitHub Secrets

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ `Settings ‚Üí Secrets and variables ‚Üí Actions` –∏ –¥–æ–±–∞–≤—å—Ç–µ:

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã**:
- `DEPLOY_HOST` - IP –∏–ª–∏ –¥–æ–º–µ–Ω –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- `DEPLOY_USER` - SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—Å sudo –ø—Ä–∞–≤–∞–º–∏)
- `DEPLOY_SSH_KEY` - –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
- `BOT_TOKEN` - Telegram bot token –æ—Ç @BotFather

**–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Å–µ–∫—Ä–µ—Ç—ã (–¥–ª—è HTTPS)**:
- `DOMAIN` - –í–∞—à –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, dating.example.com)
- `ACME_EMAIL` - Email –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π Let's Encrypt

### 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –¥–µ–ø–ª–æ–π

```bash
# –ü—É—à –≤ main –≤–µ—Ç–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –¥–µ–ø–ª–æ–π
git push origin main

# –ò–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –≤—Ä—É—á–Ω—É—é —á–µ—Ä–µ–∑ GitHub Actions
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–µ–ø–ª–æ–π

–ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ:
- Bot: –≤ Telegram
- WebApp: https://your-domain.com
- Grafana: http://your-server:3000 (admin/admin)
- Prometheus: http://your-server:9090

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –ó–∞–ø—É—Å–∫ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

```bash
# –õ–æ–∫–∞–ª—å–Ω–æ
docker compose -f docker-compose.dev.yml --profile monitoring up -d

# –ü—Ä–æ–¥–∞–∫—à–Ω (–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏ –¥–µ–ø–ª–æ–µ)
docker compose --profile monitoring up -d
```

### –î–æ—Å—Ç—É–ø –∫ –¥–∞—à–±–æ—Ä–¥–∞–º

- **Grafana**: http://localhost:3000 (admin/admin)
- **Prometheus**: http://localhost:9090
- **cAdvisor**: http://localhost:8081

---

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è —Å–∏—Å—Ç–µ–º—ã

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker compose ps
```

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ —Å—Ç–∞—Ç—É—Å–µ `Up` –∏ `healthy`.

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose logs -f

# –¢–æ–ª—å–∫–æ –±–æ—Ç
docker compose logs -f bot

# –¢–æ–ª—å–∫–æ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
docker compose logs -f db
```

### –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

```bash
docker compose exec db psql -U dating -d dating

# –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
# \dt              - —Å–ø–∏—Å–æ–∫ —Ç–∞–±–ª–∏—Ü
# \d profiles      - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã profiles
# SELECT COUNT(*) FROM profiles;  - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Ñ–∏–ª–µ–π
```

---

## –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
docker compose down
```

### –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∏ —É–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ (‚ö†Ô∏è —É–¥–∞–ª–∏—Ç –≤—Å–µ –ø—Ä–æ—Ñ–∏–ª–∏!)

```bash
docker compose down -v
```

### –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –æ–±—Ä–∞–∑—ã

```bash
docker system prune -a
```

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å–º. [Monitoring Guide](../monitoring/README.md)
2. **–ò–∑—É—á–∏—Ç–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É** - —Å–º. [Architecture Documentation](ARCHITECTURE.md)
3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç—ã** - —Å–º. [Testing Guide](TESTING.md)
4. **–ö–∞—Å—Ç–æ–º–∏–∑–∏—Ä—É–π—Ç–µ WebApp** - —Å–º. [WebApp Customization](WEBAPP.md)

---

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π BOT_TOKEN
- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker compose logs bot

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ
docker compose restart bot
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ò–∑–º–µ–Ω–∏–ª—Å—è –ø–∞—Ä–æ–ª—å –ë–î
- Volume –ø–æ–≤—Ä–µ–∂–¥–µ–Ω

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü–µ—Ä–µ—Å–æ–∑–¥–∞–π—Ç–µ –ë–î (‚ö†Ô∏è —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ)
docker compose down -v
docker compose up -d
```

### WebApp –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 404

**–ü—Ä–∏—á–∏–Ω—ã**:
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π WEBAPP_URL –≤ .env
- nginx –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
docker compose ps webapp
docker compose logs webapp

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ WebApp
docker compose restart webapp
```

---

## –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

- üìñ [–ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](../README.md)
- üêõ [–°–æ–∑–¥–∞—Ç—å issue](https://github.com/erliona/dating/issues)
- üí¨ [–û–±—Å—É–∂–¥–µ–Ω–∏—è](https://github.com/erliona/dating/discussions)

---

**–£—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è! üéâ**
