# üíï Dating Telegram Mini App - –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üìñ –û–±–∑–æ—Ä

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–Ω–∞–∫–æ–º—Å—Ç–≤, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∫–∞–∫ Telegram Mini App. –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª–∏, –∏—Å–∫–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤, —Å—Ç–∞–≤–∏—Ç—å –ª–∞–π–∫–∏ –∏ –æ–±—â–∞—Ç—å—Å—è —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏.

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

**Dating Mini App** - —ç—Ç–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤, –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –≤ Telegram:

### –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- üíë **–ü–æ–∏—Å–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–∞** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∫–µ—Ç —Å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- ‚ù§Ô∏è **–°–∏—Å—Ç–µ–º–∞ –ª–∞–π–∫–æ–≤** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ—è–≤–∏—Ç—å —Å–∏–º–ø–∞—Ç–∏—é –∏–ª–∏ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- üéØ **–ú–∞—Ç—á–∏–Ω–≥** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ —Å–≤—è–∑–∏ –ø—Ä–∏ –≤–∑–∞–∏–º–Ω–æ–π —Å–∏–º–ø–∞—Ç–∏–∏
- üìç **–ü–æ–∏—Å–∫ –ø–æ–±–ª–∏–∑–æ—Å—Ç–∏** - —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
- üîê **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ 18+, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö
- üåü **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ** - –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏ - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–Ω—É—Ç—Ä–∏ Telegram
- ‚úÖ –ë—ã—Å—Ç—Ä–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram –∞–∫–∫–∞—É–Ω—Ç
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø–æ–¥ –ª—é–±—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- ‚úÖ Production-ready –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- ‚úÖ –í—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

## ‚ú® –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### üë§ –ü—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è** - –ø–æ–ª–Ω–∞—è –∞–Ω–∫–µ—Ç–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –≤—Å–µ—Ö –ø–æ–ª–µ–π
  - –ò–º—è (2-50 —Å–∏–º–≤–æ–ª–æ–≤)
  - –í–æ–∑—Ä–∞—Å—Ç (18+ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
  - –ü–æ–ª (–º—É–∂—Å–∫–æ–π/–∂–µ–Ω—Å–∫–∏–π/–¥—Ä—É–≥–æ–µ)
  - –°–µ–∫—Å—É–∞–ª—å–Ω–∞—è –æ—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è –∏ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è
  - –¶–µ–ª–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ (—Å–µ—Ä—å–µ–∑–Ω—ã–µ –æ—Ç–Ω–æ—à–µ–Ω–∏—è, –¥—Ä—É–∂–±–∞, etc.)
  - –ë–∏–æ–≥—Ä–∞—Ñ–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–æ 500 —Å–∏–º–≤–æ–ª–æ–≤)
  
- **–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏**
  - –î–æ 3 —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –ø—Ä–æ—Ñ–∏–ª—è
  - –§–æ—Ä–º–∞—Ç—ã: JPEG, PNG, WebP
  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä: 5 –ú–ë –Ω–∞ —Ñ–æ—Ç–æ
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π
  
- **–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
  - –†—É—á–Ω–æ–π –≤—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞ (–µ—Å–ª–∏ –∑–∞–ø—Ä–µ—Ç–∏–ª–∏ GPS)
  - –•—Ä–∞–Ω–µ–Ω–∏–µ —á–µ—Ä–µ–∑ geohash –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ (~5–∫–º —Ç–æ—á–Ω–æ—Å—Ç—å)
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
  
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏**
  - –°–∫—Ä—ã—Ç—å —Ç–æ—á–Ω—ã–π –≤–æ–∑—Ä–∞—Å—Ç
  - –°–∫—Ä—ã—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –æ—Ç –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –°–∫—Ä—ã—Ç—å —Å—Ç–∞—Ç—É—Å "–æ–Ω–ª–∞–π–Ω"

### üîç –ü–æ–∏—Å–∫ –∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞

- **Discovery (–ü—Ä–æ—Å–º–æ—Ç—Ä –∞–Ω–∫–µ—Ç)**
  - –ö–∞—Ä—Ç–æ—á–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π
  - –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ–ª–∏—Å—Ç—ã–≤–∞–Ω–∏—è
  - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ: –≤–æ–∑—Ä–∞—Å—Ç, —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ, –±–∏–æ–≥—Ä–∞—Ñ–∏—è
  - –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º –∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é
  
- **–î–µ–π—Å—Ç–≤–∏—è —Å –ø—Ä–æ—Ñ–∏–ª—è–º–∏**
  - ‚ù§Ô∏è **–õ–∞–π–∫** - –≤—ã—Ä–∞–∑–∏—Ç—å —Å–∏–º–ø–∞—Ç–∏—é
  - ‚úñÔ∏è **–ü—Ä–æ–ø—É—Å—Ç–∏—Ç—å** - –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –ø—Ä–æ—Ñ–∏–ª—é
  - ‚≠ê **–°—É–ø–µ—Ä–ª–∞–π–∫** - –æ—Å–æ–±–∞—è —Å–∏–º–ø–∞—Ç–∏—è (–±—É–¥—É—â–∞—è —Ñ—É–Ω–∫—Ü–∏—è)
  - üåü **–î–æ–±–∞–≤–∏—Ç—å –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ** - —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
  
- **–ú–∞—Ç—á–∏–Ω–≥**
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞ –ø—Ä–∏ –≤–∑–∞–∏–º–Ω–æ–º –ª–∞–π–∫–µ
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–æ–≤–æ–º –º–∞—Ç—á–µ
  - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –º–∞—Ç—á–µ–π —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
  
- **–ò–∑–±—Ä–∞–Ω–Ω–æ–µ**
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π
  - –ü—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –∏–∑–±—Ä–∞–Ω–Ω—ã—Ö
  - –£–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

### üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- **Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**
  - HMAC –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç Telegram
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –∏ –≤—Ä–µ–º–µ–Ω–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
  - –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ –¥–∞–Ω–Ω—ã—Ö
  
- **JWT —Ç–æ–∫–µ–Ω—ã**
  - –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤
  - –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
  
- **Rate Limiting**
  - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø—Ä–æ—Å–æ–≤
  - –ó–∞—â–∏—Ç–∞ –æ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–π –∏ —Å–ø–∞–º–∞
  - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
  
- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑—Ä–∞—Å—Ç–∞ 18+ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –ø—Ä–æ—Ñ–∏–ª—è
  - –ó–∞—â–∏—Ç–∞ –æ—Ç SQL –∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ ORM
  - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### –ß—Ç–æ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
- ‚úÖ –ü–æ–∏—Å–∫ –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –ª–∞–π–∫–æ–≤ –∏ –º–∞—Ç—á–∏–Ω–≥–∞
- ‚úÖ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏
- ‚úÖ HTTP API –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- üöß –ß–∞—Ç –º–µ–∂–¥—É —Å–æ–≤–ø–∞–≤—à–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- üöß Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –º–∞—Ç—á–∞—Ö –∏ —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- üöß –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ–∏—Å–∫–∞
- üöß –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- üöß –ü–ª–∞—Ç–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (Telegram Stars)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker –∏ Docker Compose v2.0+
- Telegram –±–æ—Ç —Ç–æ–∫–µ–Ω –æ—Ç [@BotFather](https://t.me/BotFather)
- (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –î–æ–º–µ–Ω –¥–ª—è production —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

### –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞ –≤ Telegram

1. –û—Ç–∫—Ä–æ–π—Ç–µ [@BotFather](https://t.me/BotFather) –≤ Telegram
2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ –∫–æ–º–∞–Ω–¥—É `/newbot`
3. –°–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º: —É–∫–∞–∂–∏—Ç–µ –∏–º—è –∏ username –±–æ—Ç–∞
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–æ–∫–µ–Ω (—Ñ–æ—Ä–º–∞—Ç: `123456789:ABCdef...`)
5. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –±–æ—Ç–∞:
   ```
   /setdescription - –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤
   /setabouttext - Dating app in Telegram
   /setuserpic - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∞–≤–∞—Ç–∞—Ä –±–æ—Ç–∞
   ```

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/erliona/dating.git
cd dating

# 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env –∏ —É–∫–∞–∂–∏—Ç–µ –≤–∞—à BOT_TOKEN

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
docker compose -f docker-compose.dev.yml up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
docker compose ps

# 5. –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs -f bot

# 6. –û—Ç–∫—Ä—ã—Ç—å –±–æ—Ç–∞ –≤ Telegram –∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å /start
```

### –ó–∞–ø—É—Å–∫ —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º

```bash
# –ó–∞–ø—É—Å–∫ —Å –ø–æ–ª–Ω—ã–º —Å—Ç–µ–∫–æ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker compose --profile monitoring up -d

# –î–æ—Å—Ç—É–ø –∫ –¥–∞—à–±–æ—Ä–¥–∞–º:
# Grafana:    http://localhost:3000 (admin/admin)
# Prometheus: http://localhost:9090
# Mini App:   http://localhost (—á–µ—Ä–µ–∑ –±–æ—Ç–∞)
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**
   ```bash
   docker compose exec db psql -U dating -d dating -c "SELECT count(*) FROM users;"
   ```

2. **API –±–æ—Ç–∞**
   ```bash
   curl -X GET "http://localhost:8080/health"
   ```

3. **Telegram –±–æ—Ç**
   - –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ –≤ Telegram
   - –û—Ç–ø—Ä–∞–≤—å—Ç–µ `/start`
   - –î–æ–ª–∂–Ω–∞ –ø–æ—è–≤–∏—Ç—å—Å—è –∫–Ω–æ–ø–∫–∞ "üöÄ –û—Ç–∫—Ä—ã—Ç—å Mini App"

4. **Mini App**
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É –æ—Ç–∫—Ä—ã—Ç–∏—è Mini App
   - –î–æ–ª–∂–µ–Ω –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è —ç–∫—Ä–∞–Ω –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

### –û–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Telegram User  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Telegram Mini App (WebApp)          ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇDiscovery ‚îÇ  ‚îÇ Matches  ‚îÇ  ‚îÇ Settings ‚îÇ ‚îÇ
‚îÇ  ‚îÇ  Screen  ‚îÇ  ‚îÇ  Screen  ‚îÇ  ‚îÇ  Screen  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ         HTML + CSS + JavaScript             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ HTTP API / WebApp.sendData()
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           Telegram Bot (Backend)            ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Bot Handlers (aiogram)             ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - /start command                   ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - WebApp data handler              ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Callbacks                        ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  HTTP API (aiohttp)                 ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - /api/profile                     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - /api/discover                    ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - /api/like                        ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - /api/matches                     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - /api/favorites                   ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Business Logic                     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Authentication (JWT, HMAC)       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Validation                       ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Matching algorithm               ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - Geolocation processing           ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îÇ
‚îÇ  ‚îÇ  Data Access Layer (Repository)     ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - ProfileRepository                ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - InteractionRepository            ‚îÇ   ‚îÇ
‚îÇ  ‚îÇ  - MatchRepository                  ‚îÇ   ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ SQLAlchemy (async)
         ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         PostgreSQL Database                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ  users   ‚îÇ  ‚îÇ profiles ‚îÇ  ‚îÇ  photos  ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇinteractions‚îÇ ‚îÇ matches  ‚îÇ  ‚îÇfavorites ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã

#### 1. Frontend (Telegram Mini App)
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: –ß–∏—Å—Ç—ã–π HTML/CSS/JavaScript –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–æ–≤
- **–≠–∫—Ä–∞–Ω—ã**: Onboarding, Profile, Discovery, Matches, Favorites, Settings
- **–§—É–Ω–∫—Ü–∏–∏**:
  - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram WebApp API
  - –ê–¥–∞–ø—Ç–∞—Ü–∏—è –∫ —Ç–µ–º–µ Telegram (—Å–≤–µ—Ç–ª–∞—è/—Ç–µ–º–Ω–∞—è)
  - Haptic feedback –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è UX
  - Offline-ready —Å –æ—á–µ—Ä–µ–¥—å—é –¥–µ–π—Å—Ç–≤–∏–π
  - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ

#### 2. Backend (Python Bot)
- **–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: Python 3.11+, aiogram 3.x, aiohttp
- **–ú–æ–¥—É–ª–∏**:
  - `main.py` - —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞
  - `api.py` - HTTP API –¥–ª—è Mini App
  - `db.py` - –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
  - `repository.py` - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
  - `validation.py` - –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
  - `security.py` - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
  - `geo.py` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
  - `media.py` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π
  - `cache.py` - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å TTL
  - `config.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π

#### 3. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
- **–¢–∞–±–ª–∏—Ü—ã**:
  - `users` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ Telegram
  - `profiles` - –∞–Ω–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - `photos` - —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π
  - `interactions` - –ª–∞–π–∫–∏/–¥–∏–∑–ª–∞–π–∫–∏
  - `matches` - –≤–∑–∞–∏–º–Ω—ã–µ —Å–∏–º–ø–∞—Ç–∏–∏
  - `favorites` - –∏–∑–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏
- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
  - Async –¥—Ä–∞–π–≤–µ—Ä (asyncpg)
  - –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
  - Constraints –¥–ª—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
  - –ú–∏–≥—Ä–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ Alembic

#### 4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- **Prometheus** - –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- **Grafana** - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∏ –¥–∞—à–±–æ—Ä–¥—ã
- **Loki** - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏
- **cAdvisor** - –º–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

#### –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è
```
1. User -> Mini App: –∑–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É –ø—Ä–æ—Ñ–∏–ª—è
2. Mini App: –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
3. Mini App -> Bot: tg.sendData(profileData)
4. Bot: –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ WebApp handler
5. Bot: –≤–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
6. Bot -> DB: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç user, profile, photos
7. Bot -> User: –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
```

#### –ü–æ–∏—Å–∫ –∏ –º–∞—Ç—á–∏–Ω–≥
```
1. Mini App -> API: GET /api/discover?limit=10
2. API: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç JWT —Ç–æ–∫–µ–Ω
3. Repository: –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º
   - –ò—Å–∫–ª—é—á–∞–µ—Ç –ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ
   - –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—é (geohash)
   - –§–∏–ª—å—Ç—Ä—É–µ—Ç –ø–æ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º
4. API -> Mini App: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–æ—Ñ–∏–ª–µ–π
5. User: –¥–µ–ª–∞–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ (like/pass)
6. Mini App -> API: POST /api/like {target_id}
7. Repository: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç interaction
8. Repository: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∑–∞–∏–º–Ω–æ—Å—Ç—å
9. IF –≤–∑–∞–∏–º–Ω—ã–π like -> —Å–æ–∑–¥–∞–µ—Ç match
10. API -> Mini App: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–ù–∞ –≤—Ö–æ–¥–µ**: HMAC –≤–∞–ª–∏–¥–∞—Ü–∏—è Telegram initData
- **–°–µ—Å—Å–∏–∏**: JWT —Ç–æ–∫–µ–Ω—ã —Å TTL 24 —á–∞—Å–∞
- **API**: Rate limiting –Ω–∞ –≤—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: SQL injection protection —á–µ—Ä–µ–∑ ORM
- **–ü–∞—Ä–æ–ª–∏**: –ù–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Telegram
- **HTTPS**: –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤ production (Let's Encrypt)

## üîê –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

```bash
# Telegram Bot
BOT_TOKEN=123456789:ABCdef...          # –¢–æ–∫–µ–Ω –æ—Ç @BotFather

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
POSTGRES_DB=dating                     # –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
POSTGRES_USER=dating                   # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î
POSTGRES_PASSWORD=secure_password      # –ü–∞—Ä–æ–ª—å –ë–î (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å!)

# JWT
JWT_SECRET=your-secret-key-here        # –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
```

#### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–¥–ª—è production —Å HTTPS)

```bash
# –î–æ–º–µ–Ω –∏ SSL
DOMAIN=yourdomain.com                  # –í–∞—à –¥–æ–º–µ–Ω
WEBAPP_URL=https://${DOMAIN}           # URL Mini App
ACME_EMAIL=admin@yourdomain.com        # Email –¥–ª—è Let's Encrypt

# API
API_PORT=8080                          # –ü–æ—Ä—Ç HTTP API (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 8080)

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
ENABLE_MONITORING=true                 # –í–∫–ª—é—á–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
```

#### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

```bash
# –õ–∏–º–∏—Ç—ã
MAX_PHOTO_SIZE_MB=5                    # –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä —Ñ–æ—Ç–æ
MAX_PHOTOS_PER_PROFILE=3               # –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–æ—Ç–æ –≤ –ø—Ä–æ—Ñ–∏–ª–µ

# –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
DEFAULT_SEARCH_RADIUS_KM=50            # –†–∞–¥–∏—É—Å –ø–æ–∏—Å–∫–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
GEOHASH_PRECISION=5                    # –¢–æ—á–Ω–æ—Å—Ç—å geohash (5 = ~5–∫–º)

# Rate Limiting
RATE_LIMIT_REQUESTS=100                # –ó–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É
RATE_LIMIT_PERIOD=60                   # –ü–µ—Ä–∏–æ–¥ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_POOL_SIZE=10                        # –†–∞–∑–º–µ—Ä –ø—É–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π
DB_MAX_OVERFLOW=20                     # –ú–∞–∫—Å–∏–º—É–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
LOG_LEVEL=INFO                         # –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è (DEBUG, INFO, WARNING, ERROR)
JSON_LOGS=true                         # –õ–æ–≥–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
```

### –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
nano .env  # –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª—é–±–æ–π —Ä–µ–¥–∞–∫—Ç–æ—Ä

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ñ–∞–π–ª –Ω–µ –ø–æ–ø–∞–¥–µ—Ç –≤ git
cat .gitignore | grep .env
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö

‚ö†Ô∏è **–í–∞–∂–Ω–æ:**
- –ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª –≤ git
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è –ë–î
- –•—Ä–∞–Ω–∏—Ç–µ JWT_SECRET –≤ —Å–µ–∫—Ä–µ—Ç–µ
- –í production –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ secrets management (GitHub Secrets, Vault, etc.)

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∑–∞–¥–∞–Ω—ã
docker compose config

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker compose exec db psql -U dating -d dating -c "SELECT version();"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–æ—Ç–∞
docker compose logs bot | grep "Bot started"
```

## üíæ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü–∞: users
–û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö Telegram.

```sql
CREATE TABLE users (
    id BIGINT PRIMARY KEY,           -- Telegram user ID
    username VARCHAR(255),           -- Telegram username
    first_name VARCHAR(255),         -- –ò–º—è –≤ Telegram
    created_at TIMESTAMP,            -- –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
    last_active TIMESTAMP            -- –ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
);
```

#### –¢–∞–±–ª–∏—Ü–∞: profiles
–ê–Ω–∫–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤.

```sql
CREATE TABLE profiles (
    id SERIAL PRIMARY KEY,
    user_id BIGINT UNIQUE NOT NULL,  -- –°—Å—ã–ª–∫–∞ –Ω–∞ users.id
    name VARCHAR(50) NOT NULL,       -- –ò–º—è –≤ –ø—Ä–æ—Ñ–∏–ª–µ
    birth_date DATE NOT NULL,        -- –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
    gender VARCHAR(20) NOT NULL,     -- –ü–æ–ª
    orientation VARCHAR(50),         -- –û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è
    looking_for VARCHAR(255),        -- –ò—â–µ—Ç
    goals TEXT,                      -- –¶–µ–ª–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞
    bio TEXT,                        -- –û —Å–µ–±–µ
    city VARCHAR(100),               -- –ì–æ—Ä–æ–¥
    country VARCHAR(100),            -- –°—Ç—Ä–∞–Ω–∞
    latitude DECIMAL(10, 8),         -- –®–∏—Ä–æ—Ç–∞
    longitude DECIMAL(11, 8),        -- –î–æ–ª–≥–æ—Ç–∞
    geohash VARCHAR(20),             -- Geohash –¥–ª—è –ø–æ–∏—Å–∫–∞
    hide_age BOOLEAN,                -- –°–∫—Ä—ã—Ç—å –≤–æ–∑—Ä–∞—Å—Ç
    hide_distance BOOLEAN,           -- –°–∫—Ä—ã—Ç—å —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ
    hide_online BOOLEAN,             -- –°–∫—Ä—ã—Ç—å –æ–Ω–ª–∞–π–Ω
    created_at TIMESTAMP,
    updated_at TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id)
);
```

#### –¢–∞–±–ª–∏—Ü–∞: photos
–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –ø—Ä–æ—Ñ–∏–ª–µ–π.

```sql
CREATE TABLE photos (
    id SERIAL PRIMARY KEY,
    profile_id INTEGER NOT NULL,     -- –°—Å—ã–ª–∫–∞ –Ω–∞ profiles.id
    file_id VARCHAR(255) NOT NULL,   -- Telegram file_id
    file_path VARCHAR(500),          -- –ü—É—Ç—å –∫ —Ñ–∞–π–ª—É
    position INTEGER,                -- –ü–æ—Ä—è–¥–æ–∫ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
    created_at TIMESTAMP,
    FOREIGN KEY (profile_id) REFERENCES profiles(id) ON DELETE CASCADE
);
```

#### –¢–∞–±–ª–∏—Ü–∞: interactions
–ò—Å—Ç–æ—Ä–∏—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

```sql
CREATE TABLE interactions (
    id SERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,         -- –ö—Ç–æ —Å–¥–µ–ª–∞–ª –¥–µ–π—Å—Ç–≤–∏–µ
    target_id BIGINT NOT NULL,       -- –ù–∞ –∫–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–æ
    action VARCHAR(20) NOT NULL,     -- like, pass, superlike
    created_at TIMESTAMP,
    UNIQUE (user_id, target_id),     -- –û–¥–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (target_id) REFERENCES users(id)
);
```

#### –¢–∞–±–ª–∏—Ü–∞: matches
–í–∑–∞–∏–º–Ω—ã–µ —Å–∏–º–ø–∞—Ç–∏–∏.

```sql
CREATE TABLE matches (
    id SERIAL PRIMARY KEY,
    user1_id BIGINT NOT NULL,        -- –ü–µ—Ä–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    user2_id BIGINT NOT NULL,        -- –í—Ç–æ—Ä–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    created_at TIMESTAMP,
    UNIQUE (user1_id, user2_id),
    CHECK (user1_id < user2_id),     -- –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–µ–π
    FOREIGN KEY (user1_id) REFERENCES users(id),
    FOREIGN KEY (user2_id) REFERENCES users(id)
);
```

#### –¢–∞–±–ª–∏—Ü–∞: favorites
–ò–∑–±—Ä–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏.

```sql
CREATE TABLE favorites (
    id SERIAL PRIMARY KEY,
    user_id BIGINT NOT NULL,         -- –ö—Ç–æ –¥–æ–±–∞–≤–∏–ª
    target_id BIGINT NOT NULL,       -- –ö–æ–≥–æ –¥–æ–±–∞–≤–∏–ª–∏
    created_at TIMESTAMP,
    UNIQUE (user_id, target_id),
    FOREIGN KEY (user_id) REFERENCES users(id),
    FOREIGN KEY (target_id) REFERENCES users(id)
);
```

### –ò–Ω–¥–µ–∫—Å—ã

```sql
-- –ë—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø—Ä–æ—Ñ–∏–ª—è –ø–æ user_id
CREATE INDEX idx_profiles_user_id ON profiles(user_id);

-- –ü–æ–∏—Å–∫ –ø–æ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏
CREATE INDEX idx_profiles_geohash ON profiles(geohash);

-- –ü–æ–∏—Å–∫ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
CREATE INDEX idx_interactions_user_id ON interactions(user_id);
CREATE INDEX idx_interactions_target_id ON interactions(target_id);

-- –ü–æ–∏—Å–∫ –º–∞—Ç—á–µ–π
CREATE INDEX idx_matches_user1 ON matches(user1_id);
CREATE INDEX idx_matches_user2 ON matches(user2_id);
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏

#### –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec bot alembic upgrade head

# –û—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é
docker compose exec bot alembic downgrade -1

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
docker compose exec bot alembic current

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –º–∏–≥—Ä–∞—Ü–∏–π
docker compose exec bot alembic history
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–æ–¥–µ–ª–µ–π
docker compose exec bot alembic revision --autogenerate -m "Add new field to profiles"

# –†—É—á–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec bot alembic revision -m "Custom migration"
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –°–æ–∑–¥–∞–Ω–∏–µ –±—ç–∫–∞–ø–∞

```bash
# –ü–æ–ª–Ω—ã–π –¥–∞–º–ø –±–∞–∑—ã
docker compose exec db pg_dump -U dating dating > backup_$(date +%Y%m%d_%H%M%S).sql

# –¢–æ–ª—å–∫–æ –¥–∞–Ω–Ω—ã–µ (–±–µ–∑ —Å—Ö–µ–º—ã)
docker compose exec db pg_dump -U dating dating --data-only > data_backup.sql

# –¢–æ–ª—å–∫–æ —Å—Ö–µ–º–∞ (–±–µ–∑ –¥–∞–Ω–Ω—ã—Ö)
docker compose exec db pg_dump -U dating dating --schema-only > schema_backup.sql

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞
docker compose exec db pg_dump -U dating dating -t profiles > profiles_backup.sql
```

#### –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞

```bash
# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π –¥–∞–º–ø
docker compose exec -T db psql -U dating dating < backup.sql

# –û—á–∏—Å—Ç–∏—Ç—å –±–∞–∑—É –ø–µ—Ä–µ–¥ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º
docker compose exec db psql -U dating dating -c "DROP SCHEMA public CASCADE; CREATE SCHEMA public;"
docker compose exec -T db psql -U dating dating < backup.sql
```

#### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–æ–∑–¥–∞–π—Ç–µ cron –∑–∞–¥–∞—á—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ:

```bash
# –û—Ç–∫—Ä—ã—Ç—å crontab
crontab -e

# –î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É (–∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 3:00)
0 3 * * * cd /path/to/dating && docker compose exec -T db pg_dump -U dating dating > /backups/dating_$(date +\%Y\%m\%d).sql

# –£–¥–∞–ª—è—Ç—å –±—ç–∫–∞–ø—ã —Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π
0 4 * * * find /backups -name "dating_*.sql" -mtime +30 -delete
```

### Maintenance

#### –û—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–æ—Ñ–∏–ª–∏ (–ø—Ä–∏–º–µ—Ä)
docker compose exec db psql -U dating dating << EOF
DELETE FROM profiles 
WHERE updated_at < NOW() - INTERVAL '1 year'
AND user_id NOT IN (SELECT user_id FROM interactions WHERE created_at > NOW() - INTERVAL '6 months');
EOF
```

#### –ê–Ω–∞–ª–∏–∑ —Ä–∞–∑–º–µ—Ä–∞ —Ç–∞–±–ª–∏—Ü

```bash
docker compose exec db psql -U dating dating -c "
SELECT 
    schemaname,
    tablename,
    pg_size_pretty(pg_total_relation_size(schemaname||'.'||tablename)) AS size
FROM pg_tables
WHERE schemaname = 'public'
ORDER BY pg_total_relation_size(schemaname||'.'||tablename) DESC;
"
```

#### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –±–∞–∑—ã

```bash
# VACUUM –∏ ANALYZE –¥–ª—è –≤—Å–µ—Ö —Ç–∞–±–ª–∏—Ü
docker compose exec db psql -U dating dating -c "VACUUM ANALYZE;"

# REINDEX –¥–ª—è –≤—Å–µ—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
docker compose exec db psql -U dating dating -c "REINDEX DATABASE dating;"
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

#### –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
python -m pytest tests/ -v

# –° –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏
python -m pytest tests/ --cov=bot --cov-report=html --cov-report=term

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª —Ç–µ—Å—Ç–æ–≤
python -m pytest tests/test_validation.py -v

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ç–µ—Å—Ç
python -m pytest tests/test_validation.py::test_validate_name -v

# –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (–±–µ–∑ –ø–æ–∫—Ä—ã—Ç–∏—è)
python -m pytest tests/ -q
```

#### –í Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker compose exec bot pytest tests/ -v

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º –∫–æ–¥–∞
docker compose exec bot pytest tests/ --cov=bot --cov-report=term
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–æ–≤

–ü—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç **293 —Ç–µ—Å—Ç–∞** —Å –ø–æ–∫—Ä—ã—Ç–∏–µ–º **81%**:

#### –ü–æ –º–æ–¥—É–ª—è–º

| –ú–æ–¥—É–ª—å | –¢–µ—Å—Ç–æ–≤ | –ü–æ–∫—Ä—ã—Ç–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|--------|----------|----------|
| `test_validation.py` | 56 | 92% | –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª–µ–π |
| `test_api.py` | 44 | 62% | HTTP API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã |
| `test_security.py` | 31 | 86% | JWT, HMAC, —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ |
| `test_media.py` | 30 | 84% | –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π |
| `test_geo.py` | 21 | 97% | –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –∏ geohash |
| `test_config.py` | 20 | 99% | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è |
| `test_main.py` | 19 | 90% | –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–æ—Ç–∞ |
| `test_repository.py` | 14 | 82% | CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏ –ë–î |
| `test_cache.py` | 11 | 97% | –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| `test_database.py` | 47 | 100% | –ú–æ–¥–µ–ª–∏ –ë–î |

#### –ü–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: 87 —Ç–µ—Å—Ç–æ–≤
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª–µ–π –ø—Ä–æ—Ñ–∏–ª—è
  - JWT —Ç–æ–∫–µ–Ω—ã –∏ HMAC
  - Rate limiting
  - –°–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: 61 —Ç–µ—Å—Ç
  - –ú–æ–¥–µ–ª–∏ –∏ —Å–≤—è–∑–∏
  - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
  - –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
  - Constraints

- **API –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: 63 —Ç–µ—Å—Ç–∞
  - HTTP endpoints
  - –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–æ—Ç–∞
  - WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- **–£—Ç–∏–ª–∏—Ç—ã**: 82 —Ç–µ—Å—Ç–∞
  - –ì–µ–æ–ª–æ–∫–∞—Ü–∏—è
  - –ú–µ–¥–∏–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞
  - –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
  - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –¢–∏–ø—ã —Ç–µ—Å—Ç–æ–≤

#### Unit —Ç–µ—Å—Ç—ã
–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π:

```python
def test_validate_name():
    """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–º–µ–Ω–∏."""
    assert validate_name("–ò–≤–∞–Ω") is True
    assert validate_name("A" * 51) is False
    assert validate_name("") is False
```

#### Integration —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:

```python
async def test_profile_creation_flow(db_session):
    """–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è end-to-end."""
    # –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user = User(id=123, username="test")
    db_session.add(user)
    
    # –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
    profile = Profile(user_id=123, name="Test", ...)
    db_session.add(profile)
    
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
    result = await db_session.execute(
        select(Profile).where(Profile.user_id == 123)
    )
    assert result.scalar_one() is not None
```

#### API —Ç–µ—Å—Ç—ã
–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ HTTP —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:

```python
async def test_discover_endpoint(client, auth_token):
    """–¢–µ—Å—Ç API –ø–æ–∏—Å–∫–∞ –ø—Ä–æ—Ñ–∏–ª–µ–π."""
    response = await client.get(
        "/api/discover",
        headers={"Authorization": f"Bearer {auth_token}"}
    )
    assert response.status == 200
    data = await response.json()
    assert "profiles" in data
```

### –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞

#### –¢–µ–∫—É—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ

**–û–±—â–µ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: 81%**

–î–µ—Ç–∞–ª—å–Ω–æ –ø–æ –º–æ–¥—É–ª—è–º:
- ‚úÖ `bot/db.py`: **100%** - –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ `bot/config.py`: **99%** - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- ‚úÖ `bot/cache.py`: **97%** - –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `bot/geo.py`: **97%** - –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è
- ‚úÖ `bot/validation.py`: **92%** - –≤–∞–ª–∏–¥–∞—Ü–∏—è
- ‚úÖ `bot/main.py`: **90%** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±–æ—Ç–∞
- ‚úÖ `bot/security.py`: **86%** - –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- ‚úÖ `bot/media.py`: **84%** - –º–µ–¥–∏–∞
- ‚ö†Ô∏è `bot/repository.py`: **82%** - —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
- ‚ö†Ô∏è `bot/api.py`: **62%** - HTTP API

#### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–∞

```bash
# –°–æ–∑–¥–∞—Ç—å HTML –æ—Ç—á–µ—Ç
pytest --cov=bot --cov-report=html

# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ
open htmlcov/index.html  # macOS
xdg-open htmlcov/index.html  # Linux
```

### CI/CD —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤ GitHub Actions –ø—Ä–∏:
- Push –≤ main –≤–µ—Ç–∫—É
- –°–æ–∑–¥–∞–Ω–∏–∏ Pull Request
- –†—É—á–Ω–æ–º –∑–∞–ø—É—Å–∫–µ workflow

–ü—Ä–æ–≤–µ—Ä–∫–∏ –≤ CI:
1. ‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å Python
2. ‚úÖ –í—Å–µ unit —Ç–µ—Å—Ç—ã
3. ‚úÖ –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (–º–∏–Ω–∏–º—É–º 80%)
4. ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
5. ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (pip-audit)
6. ‚úÖ –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞

### –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤

#### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ—Å—Ç–∞

```python
import pytest
from bot.validation import validate_age

def test_validate_age_valid():
    """–¢–µ—Å—Ç –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –≤–æ–∑—Ä–∞—Å—Ç–∞."""
    # Arrange - –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞
    birth_date = "1990-01-01"
    
    # Act - –¥–µ–π—Å—Ç–≤–∏–µ
    result = validate_age(birth_date)
    
    # Assert - –ø—Ä–æ–≤–µ—Ä–∫–∞
    assert result is True

def test_validate_age_under_18():
    """–¢–µ—Å—Ç –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –≤–æ–∑—Ä–∞—Å—Ç–∞ –º–ª–∞–¥—à–µ 18."""
    birth_date = "2010-01-01"
    result = validate_age(birth_date)
    assert result is False
```

#### –§–∏–∫—Å—Ç—É—Ä—ã

```python
@pytest.fixture
async def db_session():
    """–§–∏–∫—Å—Ç—É—Ä–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å–µ—Å—Å–∏–∏ –ë–î."""
    engine = create_async_engine("sqlite+aiosqlite:///:memory:")
    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)
    
    async_session = sessionmaker(
        engine, class_=AsyncSession, expire_on_commit=False
    )
    
    async with async_session() as session:
        yield session
```

### –û—Ç–ª–∞–¥–∫–∞ —Ç–µ—Å—Ç–æ–≤

```bash
# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
pytest tests/ -vv

# –ü–æ–∫–∞–∑–∞—Ç—å print() –≤ —Ç–µ—Å—Ç–∞—Ö
pytest tests/ -s

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–µ
pytest tests/ -x

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ —É–ø–∞–≤—à–∏–µ —Ç–µ—Å—Ç—ã
pytest tests/ --lf

# –û—Ç–ª–∞–¥—á–∏–∫ –ø—Ä–∏ –æ—à–∏–±–∫–µ
pytest tests/ --pdb
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å

### –û–±–∑–æ—Ä —Å—Ç–µ–∫–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ–ª–Ω—ã–π —Å—Ç–µ–∫ observability:

```
–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Üí Prometheus (–º–µ—Ç—Ä–∏–∫–∏) ‚Üí Grafana (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)
           ‚Üí Loki (–ª–æ–≥–∏) ‚Üí Grafana (–ø–æ–∏—Å–∫ –∏ –∞–Ω–∞–ª–∏–∑)
           ‚Üí cAdvisor (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã) ‚Üí Prometheus
           ‚Üí Node Exporter (—Å–∏—Å—Ç–µ–º–∞) ‚Üí Prometheus
           ‚Üí Postgres Exporter (–ë–î) ‚Üí Prometheus
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### 1. Prometheus
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫

**–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è**:
- HTTP –∑–∞–ø—Ä–æ—Å—ã (–æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ, –≤—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞)
- –û–ø–µ—Ä–∞—Ü–∏–∏ –ë–î (–∑–∞–ø—Ä–æ—Å—ã, —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, latency)
- –ö–µ—à (hits, misses, —Ä–∞–∑–º–µ—Ä)
- –û—à–∏–±–∫–∏ –∏ –∏—Å–∫–ª—é—á–µ–Ω–∏—è

**–°–∏—Å—Ç–µ–º–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏**:
- CPU, –ø–∞–º—è—Ç—å, –¥–∏—Å–∫
- –°–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- –ú–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ Docker

**–î–æ—Å—Ç—É–ø**: http://localhost:9090

#### 2. Grafana
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫ –∏ –ª–æ–≥–æ–≤

**–î–∞—à–±–æ—Ä–¥—ã**:

1. **System Overview** (–û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã)
   - CPU –∏ –ø–∞–º—è—Ç—å –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
   - –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ PostgreSQL
   - –°–µ—Ç–µ–≤–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –¥–∏—Å–∫–∞
   - –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤

2. **Application Logs & Events** (–õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è)
   - –°–æ–±—ã—Ç–∏—è –∂–∏–∑–Ω–µ–Ω–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –±–æ—Ç–∞
   - –û—à–∏–±–∫–∏ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ª–æ–≥–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
   - –í—Ä–µ–º–µ–Ω–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –ø–æ —É—Ä–æ–≤–Ω—è–º –ª–æ–≥–æ–≤

3. **Discovery & Matching** (–ú–µ—Ç—Ä–∏–∫–∏ –∑–Ω–∞–∫–æ–º—Å—Ç–≤)
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–≤ –ø—Ä–æ—Ñ–∏–ª–µ–π
   - –õ–∞–π–∫–∏, –¥–∏–∑–ª–∞–π–∫–∏, —Å—É–ø–µ—Ä–ª–∞–π–∫–∏
   - –°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–∞—Ç—á–∏
   - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - Conversion rate (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã ‚Üí –ª–∞–π–∫–∏ ‚Üí –º–∞—Ç—á–∏)

**–î–æ—Å—Ç—É–ø**: http://localhost:3000 (admin/admin)

#### 3. Loki
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ê–≥—Ä–µ–≥–∞—Ü–∏—è –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏**:
- –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ª–æ–≥–æ–≤ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
- –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è –ø–æ –º–µ—Ç–∫–∞–º (labels)
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Grafana –¥–ª—è –ø–æ–∏—Å–∫–∞
- Retention: 30 –¥–Ω–µ–π

#### 4. Promtail
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–±–æ—Ä –ª–æ–≥–æ–≤ —Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤

–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –ª–æ–≥–∏ –∏–∑:
- Bot (–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- PostgreSQL
- Traefik
- –í—Å–µ –¥—Ä—É–≥–∏–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

### –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### –õ–æ–∫–∞–ª—å–Ω–æ

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
docker compose --profile monitoring up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
docker compose logs -f prometheus grafana loki
```

#### Production

–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞–µ—Ç—Å—è –≤ CI/CD –ø—Ä–∏ –¥–µ–ø–ª–æ–µ:

```yaml
# .github/workflows/deploy.yml
run_docker compose --profile monitoring up -d --build
```

### –î–æ—Å—Ç—É–ø –∫ –¥–∞—à–±–æ—Ä–¥–∞–º

```bash
# Grafana
http://your-domain.com:3000
# –õ–æ–≥–∏–Ω: admin
# –ü–∞—Ä–æ–ª—å: admin (—Å–º–µ–Ω–∏—Ç–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ!)

# Prometheus
http://your-domain.com:9090

# cAdvisor (–º–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤)
http://your-domain.com:8081
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞:

```json
{
  "timestamp": "2024-01-15T10:30:45.123Z",
  "level": "INFO",
  "logger": "bot.main",
  "message": "User created profile",
  "module": "main",
  "function": "handle_profile_creation",
  "line": 145,
  "user_id": 123456789,
  "event_type": "profile_created"
}
```

**–ü–æ–ª—è –ª–æ–≥–æ–≤**:
- `timestamp` - –≤—Ä–µ–º—è –≤ UTC (ISO 8601)
- `level` - —É—Ä–æ–≤–µ–Ω—å (DEBUG, INFO, WARNING, ERROR, CRITICAL)
- `logger` - –∏–º—è –ª–æ–≥–≥–µ—Ä–∞
- `message` - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è
- `module`, `function`, `line` - –º–µ—Å—Ç–æ –≤ –∫–æ–¥–µ
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ –ø–æ–ª—è: `user_id`, `event_type`, `error`, etc.

### –ü–æ–∏—Å–∫ –ª–æ–≥–æ–≤ –≤ Grafana

1. –û—Ç–∫—Ä–æ–π—Ç–µ Grafana ‚Üí Explore
2. –í—ã–±–µ—Ä–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö: Loki
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ LogQL –¥–ª—è –ø–æ–∏—Å–∫–∞:

```logql
# –í—Å–µ –ª–æ–≥–∏ –±–æ—Ç–∞
{container="bot"}

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
{container="bot"} |= "ERROR"

# –õ–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
{container="bot"} | json | user_id="123456789"

# –û—à–∏–±–∫–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–π —á–∞—Å
{container="bot"} |= "ERROR" [1h]

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–ø–∞–º
sum by (event_type) (rate({container="bot"} | json [5m]))
```

### –ê–ª–µ—Ä—Ç—ã –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

#### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–ª–µ—Ä—Ç–æ–≤ –≤ Grafana

1. –°–æ–∑–¥–∞–π—Ç–µ notification channel (Email, Telegram, Slack)
2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ –∞–ª–µ—Ä—Ç–æ–≤ –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–µ—Ç—Ä–∏–∫:

**–ü—Ä–∏–º–µ—Ä—ã –∞–ª–µ—Ä—Ç–æ–≤**:

- **High Error Rate**
  ```
  rate(errors_total[5m]) > 10
  ```
  –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –±–æ–ª–µ–µ 10 –æ—à–∏–±–æ–∫ –≤ –º–∏–Ω—É—Ç—É

- **Database Connections**
  ```
  pg_stat_database_numbackends > 80
  ```
  –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –±–æ–ª–µ–µ 80 –∞–∫—Ç–∏–≤–Ω—ã—Ö —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

- **Low Disk Space**
  ```
  node_filesystem_avail_bytes / node_filesystem_size_bytes < 0.1
  ```
  –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –º–µ–Ω–µ–µ 10% —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

- **Service Down**
  ```
  up{job="bot"} == 0
  ```
  –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –±–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

### –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### –ö–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (KPI)

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**:
- Response time API: p50, p95, p99
- Database query time
- Cache hit rate
- Requests per second

**–ë–∏–∑–Ω–µ—Å-–º–µ—Ç—Ä–∏–∫–∏**:
- –ù–æ–≤—ã–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –≤ –¥–µ–Ω—å
- –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (DAU, MAU)
- –°–æ–∑–¥–∞–Ω–Ω—ã–µ –º–∞—Ç—á–∏
- Conversion rate (–ø—Ä–æ—Å–º–æ—Ç—Ä—ã ‚Üí –ª–∞–π–∫–∏ ‚Üí –º–∞—Ç—á–∏)
- –°—Ä–µ–¥–Ω–∏–µ –ª–∞–π–∫–∏ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**:
- Uptime (%)
- Error rate (%)
- Failed requests
- Database availability

### Troubleshooting —Å –ø–æ–º–æ—â—å—é –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

#### –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU

1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Grafana ‚Üí System Overview ‚Üí CPU usage
2. –ù–∞–π—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –≤—ã—Å–æ–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `docker compose logs <container>`
4. –£–≤–µ–ª–∏—á–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥

#### –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –ë–î

1. Grafana ‚Üí System Overview ‚Üí PostgreSQL metrics
2. Prometheus ‚Üí Query: `pg_stat_statements_mean_time_seconds`
3. –ù–∞–π—Ç–∏ –º–µ–¥–ª–µ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤ –ª–æ–≥–∞—Ö
4. –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–µ–∫—Å—ã –∏–ª–∏ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã

#### –í—ã—Å–æ–∫–∏–π error rate

1. Grafana ‚Üí Logs & Events ‚Üí Filter by ERROR
2. –ù–∞–π—Ç–∏ –ø–∞—Ç—Ç–µ—Ä–Ω –æ—à–∏–±–æ–∫
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–µ–∫-—Ç—Ä–µ–π—Å—ã
4. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –∏ –∑–∞–¥–µ–ø–ª–æ–∏—Ç—å

## üö¢ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (Deployment)

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è**:
- Ubuntu 20.04+ –∏–ª–∏ Debian 11+
- 2 CPU cores
- 4 GB RAM
- 20 GB SSD
- Docker 20.10+
- Docker Compose 2.0+

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–µ**:
- 4 CPU cores
- 8 GB RAM
- 50 GB SSD
- –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è —Å DNS
- –û—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã: 80 (HTTP), 443 (HTTPS)

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

#### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker

```bash
# –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É
sudo apt update && sudo apt upgrade -y

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh

# –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É docker
sudo usermod -aG docker $USER

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Docker Compose
sudo apt install docker-compose-plugin

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∫—É
docker --version
docker compose version
```

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞

```bash
# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å UFW
sudo apt install ufw

# –†–∞–∑—Ä–µ—à–∏—Ç—å SSH
sudo ufw allow 22/tcp

# –†–∞–∑—Ä–µ—à–∏—Ç—å HTTP/HTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# –í–∫–ª—é—á–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw enable
```

#### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DNS

–î–æ–±–∞–≤—å—Ç–µ A-–∑–∞–ø–∏—Å—å –¥–ª—è –≤–∞—à–µ–≥–æ –¥–æ–º–µ–Ω–∞:
```
A    @    YOUR_SERVER_IP
A    www  YOUR_SERVER_IP
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ (GitHub Actions)

#### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ GitHub Secrets

–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Settings ‚Üí Secrets and variables ‚Üí Actions –∏ –¥–æ–±–∞–≤—å—Ç–µ:

| Secret | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|--------|----------|--------|
| `DEPLOY_HOST` | IP –∏–ª–∏ hostname —Å–µ—Ä–≤–µ—Ä–∞ | `198.51.100.1` |
| `DEPLOY_USER` | SSH –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å | `ubuntu` |
| `DEPLOY_SSH_KEY` | –ü—Ä–∏–≤–∞—Ç–Ω—ã–π SSH –∫–ª—é—á | `-----BEGIN OPENSSH...` |
| `BOT_TOKEN` | Telegram bot token | `123456789:ABCdef...` |
| `DOMAIN` | –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) | `dating.example.com` |

#### 2. –î–µ–ø–ª–æ–π

```bash
# –ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—à—å—Ç–µ –≤ main –≤–µ—Ç–∫—É
git push origin main

# GitHub Actions –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç —Ç–µ—Å—Ç—ã
# 2. –°–æ–±–µ—Ä–µ—Ç Docker –æ–±—Ä–∞–∑
# 3. –ü–æ–¥–∫–ª—é—á–∏—Ç—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É –ø–æ SSH
# 4. –°–∫–æ–ø–∏—Ä—É–µ—Ç —Ñ–∞–π–ª—ã
# 5. –ó–∞–ø—É—Å—Ç–∏—Ç docker compose
# 6. –ü—Ä–∏–º–µ–Ω–∏—Ç –º–∏–≥—Ä–∞—Ü–∏–∏
# 7. –ü—Ä–æ–≤–µ—Ä–∏—Ç health check
```

–û—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ GitHub ‚Üí Actions

### –†—É—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

#### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É
ssh user@your-server.com

# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/erliona/dating.git
cd dating
```

#### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å .env —Ñ–∞–π–ª

```bash
# –°–æ–∑–¥–∞—Ç—å –∏–∑ –ø—Ä–∏–º–µ—Ä–∞
cp .env.example .env

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
nano .env
```

–£–∫–∞–∂–∏—Ç–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
```bash
BOT_TOKEN=your_bot_token_here
DOMAIN=your-domain.com
ACME_EMAIL=admin@your-domain.com
POSTGRES_PASSWORD=your_secure_password
JWT_SECRET=your_secret_key
```

#### 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

```bash
# Production —Å HTTPS –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
docker compose --profile monitoring up -d --build

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs -f bot
```

#### 4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

```bash
# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec bot alembic upgrade head

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
docker compose exec bot alembic current
```

#### 5. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å health endpoint
curl https://your-domain.com/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –±–æ—Ç–∞ –≤ Telegram
# –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ /start
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

#### –° GitHub Actions

–ü—Ä–æ—Å—Ç–æ –∑–∞–ø—É—à—å—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ main –≤–µ—Ç–∫—É - –¥–µ–ø–ª–æ–π –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏.

#### –í—Ä—É—á–Ω—É—é

```bash
# –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ
cd /path/to/dating

# –ü–æ–ª—É—á–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
git pull origin main

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å
docker compose --profile monitoring up -d --build

# –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec bot alembic upgrade head

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs -f bot
```

### –û—Ç–∫–∞—Ç –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –≤–µ—Ä—Å–∏–∏

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline

# –û—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –∫–æ–º–º–∏—Ç—É
git checkout <commit-hash>

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å
docker compose up -d --build

# –û—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
docker compose exec bot alembic downgrade <revision>
```

### Zero-downtime deployment

–î–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–µ–∑ –ø—Ä–æ—Å—Ç–æ—è:

```bash
# 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É
docker compose -f docker-compose.blue-green.yml up -d

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å
curl http://localhost:8081/health

# 3. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å Traefik –Ω–∞ –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é
# (–æ–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–ª–∏ labels)

# 4. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é
docker compose down
```

### SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã

Traefik –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –æ—Ç Let's Encrypt.

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ Traefik
docker compose logs traefik | grep acme

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
openssl s_client -connect your-domain.com:443 -servername your-domain.com
```

#### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

–û–±—ã—á–Ω–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è, –Ω–æ –µ—Å–ª–∏ –Ω—É–∂–Ω–æ:

```bash
# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç
docker compose exec traefik rm /letsencrypt/acme.json

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Traefik
docker compose restart traefik

# –ù–æ–≤—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –±—É–¥–µ—Ç –ø–æ–ª—É—á–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
```

### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

#### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞
docker compose up -d --scale bot=3

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å webhook –≤–º–µ—Å—Ç–æ polling
# –¥–ª—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏
```

#### –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –ë–î

```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å PostgreSQL —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é
# 1. Master –¥–ª—è –∑–∞–ø–∏—Å–∏
# 2. Replicas –¥–ª—è —á—Ç–µ–Ω–∏—è

# –í –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å read replicas –¥–ª—è select –∑–∞–ø—Ä–æ—Å–æ–≤
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

#### Health checks

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
curl https://your-domain.com/health

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose ps bot
docker compose logs bot | tail -20
```

#### –ú–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è

1. –û—Ç–∫—Ä–æ–π—Ç–µ Grafana
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∞—à–±–æ—Ä–¥ "System Overview"
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ:
   - –í—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∑–∞–ø—É—â–µ–Ω—ã
   - CPU/Memory –≤ –Ω–æ—Ä–º–µ
   - –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö
   - –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞

### Troubleshooting

#### –ë–æ—Ç –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs bot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
docker compose config | grep BOT_TOKEN

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
docker compose exec bot python -c "from bot.db import engine; print('OK')"
```

#### HTTPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS
dig your-domain.com

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ—Ä—Ç—ã
sudo netstat -tlnp | grep -E '(80|443)'

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Traefik
docker compose logs traefik | grep -i error

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π—Ä–≤–æ–ª
sudo ufw status
```

#### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose ps db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
docker compose exec db psql -U dating -d dating -c "SELECT 1;"
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ä—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

**Telegram –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è**:
- ‚úÖ HMAC-SHA256 –≤–∞–ª–∏–¥–∞—Ü–∏—è `initData` –æ—Ç Telegram
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (max 1 —á–∞—Å)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç replay –∞—Ç–∞–∫

**JWT —Ç–æ–∫–µ–Ω—ã**:
- ‚úÖ –°–µ—Ä–≤–µ—Ä–Ω—ã–µ —Å–µ—Å—Å–∏–∏ —Å TTL 24 —á–∞—Å–∞
- ‚úÖ –ü–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–µ —Ç–æ–∫–µ–Ω—ã (HS256)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- ‚úÖ –û—Ç–∑—ã–≤ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

**Rate Limiting**:
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ IP
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –ø–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç DDoS
- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã

#### 2. –ó–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

**–í —Ç—Ä–∞–Ω–∑–∏—Ç–µ**:
- ‚úÖ HTTPS –≤–µ–∑–¥–µ (Let's Encrypt)
- ‚úÖ TLS 1.2+ —Ç–æ–ª—å–∫–æ
- ‚úÖ Strong ciphers
- ‚úÖ HSTS –∑–∞–≥–æ–ª–æ–≤–∫–∏

**–í —Ö—Ä–∞–Ω–∏–ª–∏—â–µ**:
- ‚úÖ –ü–∞—Ä–æ–ª–∏ –ë–î –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ JWT —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤ –∫–æ–¥–µ
- ‚úÖ –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è–º–∏ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ Geohash –¥–ª—è –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ –ª–æ–∫–∞—Ü–∏–∏ (~5–∫–º —Ç–æ—á–Ω–æ—Å—Ç—å)

**–í –∫–æ–¥–µ**:
- ‚úÖ SQL injection protection (SQLAlchemy ORM)
- ‚úÖ XSS protection (—Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è –≤–≤–æ–¥–∞)
- ‚úÖ CSRF protection –¥–ª—è API
- ‚úÖ Input validation –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –∏ —Å–µ—Ä–≤–µ—Ä–µ

#### 3. –ü—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

**–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–∞–Ω–Ω—ã—Ö**:
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ—Å—Ç–∏ (—Å–∫—Ä—ã—Ç—å –≤–æ–∑—Ä–∞—Å—Ç/—Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ/–æ–Ω–ª–∞–π–Ω)
- ‚úÖ Geohash –≤–º–µ—Å—Ç–æ —Ç–æ—á–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö (GDPR compliance –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å)

**–ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**:
- ‚úÖ –•—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –ù–µ—Ç —Å–±–æ—Ä–∞ –ª–∏—à–Ω–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —Å—Ç–∞—Ä—ã—Ö —Å–µ—Å—Å–∏–π
- ‚úÖ –õ–æ–≥–∏ –±–µ–∑ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

#### 4. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**Docker**:
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –±–∞–∑–æ–≤—ã–µ –æ–±—Ä–∞–∑—ã
- ‚úÖ Non-root –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞—Ö
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–µ—Ç–∏
- ‚úÖ Read-only —Ñ–∞–π–ª–æ–≤—ã–µ —Å–∏—Å—Ç–µ–º—ã –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**:
- ‚úÖ –ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å–µ—Ç—å
- ‚úÖ –°–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
- ‚úÖ –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –±—ç–∫–∞–ø—ã
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

**–°–µ–∫—Ä–µ—Ç—ã**:
- ‚úÖ GitHub Secrets –¥–ª—è CI/CD
- ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
- ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç—è—Ç—Å—è –≤ git
- ‚úÖ –†–æ—Ç–∞—Ü–∏—è —Å–µ–∫—Ä–µ—Ç–æ–≤

#### 5. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

**–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**:
- ‚úÖ –í—Å–µ –ø–æ–ø—ã—Ç–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- ‚úÖ –ù–µ—É–¥–∞—á–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã API
- ‚úÖ –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ rate limits
- ‚úÖ –û—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

**–ê–ª–µ—Ä—Ç—ã**:
- ‚úÖ –í—ã—Å–æ–∫–∏–π error rate
- ‚úÖ –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
- ‚úÖ –ü—Ä–µ–≤—ã—à–µ–Ω–∏–µ –ª–∏–º–∏—Ç–æ–≤
- ‚úÖ –ü–∞–¥–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–æ–≤

**–ê—É–¥–∏—Ç**:
- ‚úÖ –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–æ—Ñ–∏–ª–µ–π
- ‚úÖ –õ–æ–≥ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π
- ‚úÖ –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –±–ª–æ–∫–∏—Ä–æ–≤–æ–∫
- ‚úÖ Security scanning –≤ CI (pip-audit)

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º
   git diff --staged | grep -i "password\|secret\|token"
   ```

2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏**
   ```bash
   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –ø–∞—Ä–æ–ª—è
   openssl rand -base64 32
   ```

3. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**
   ```bash
   # –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–µ–π
   pip-audit
   
   # –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
   pip install --upgrade -r requirements.txt
   ```

4. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –≤—Å–µ –≤—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**
   ```python
   # –ü—Ä–∏–º–µ—Ä –≤–∞–ª–∏–¥–∞—Ü–∏–∏
   def validate_input(data: str) -> bool:
       # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ XSS
       if re.search(r'<script|javascript:', data, re.I):
           return False
       return True
   ```

#### –î–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

1. **–†–µ–≥—É–ª—è—Ä–Ω–æ –æ–±–Ω–æ–≤–ª—è–π—Ç–µ —Å–∏—Å—Ç–µ–º—É**
   ```bash
   sudo apt update && sudo apt upgrade -y
   docker compose pull
   ```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª**
   ```bash
   sudo ufw default deny incoming
   sudo ufw allow 22/tcp  # SSH
   sudo ufw allow 80/tcp  # HTTP
   sudo ufw allow 443/tcp # HTTPS
   sudo ufw enable
   ```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±—ç–∫–∞–ø—ã**
   ```bash
   # Cron –∑–∞–¥–∞—á–∞ –¥–ª—è –µ–∂–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –±—ç–∫–∞–ø–∞
   0 3 * * * /path/to/backup-script.sh
   ```

4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
   ```bash
   # SSH –ø–æ–ø—ã—Ç–∫–∏
   sudo grep "Failed password" /var/log/auth.log
   
   # –ù–µ–æ–±—ã—á–Ω–∞—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
   docker compose logs bot | grep "WARNING\|ERROR"
   ```

### –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

#### GDPR Ready
- ‚úÖ –ü—Ä–∞–≤–æ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–∞–≤–æ –Ω–∞ —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è —é—Ä–∏–¥–∏—á–µ—Å–∫–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏

#### 18+ Compliance
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–æ–∑—Ä–∞—Å—Ç–∞ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- ‚úÖ –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –º–ª–∞–¥—à–µ 18 –ª–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è

#### Telegram Guidelines
- ‚úÖ –°–ª–µ–¥–æ–≤–∞–Ω–∏–µ ToS Telegram
- ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Bot API
- ‚úÖ –£–≤–∞–∂–µ–Ω–∏–µ privacy –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö

–ï—Å–ª–∏ –≤—ã –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —É—è–∑–≤–∏–º–æ—Å—Ç—å:

1. **–ù–ï —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ –ø—É–±–ª–∏—á–Ω—ã–π issue**
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ email** –≤–ª–∞–¥–µ–ª—å—Ü—É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
3. **–û–ø–∏—à–∏—Ç–µ**:
   - –¢–∏–ø —É—è–∑–≤–∏–º–æ—Å—Ç–∏
   - –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –ø–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—é

–ú—ã –æ–±—è–∑—É–µ–º—Å—è:
- –û—Ç–≤–µ—Ç–∏—Ç—å –≤ —Ç–µ—á–µ–Ω–∏–µ 48 —á–∞—Å–æ–≤
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –≤ —Ç–µ—á–µ–Ω–∏–µ 7 –¥–Ω–µ–π
- –£–ø–æ–º—è–Ω—É—Ç—å –≤–∞—Å –≤ credits (–ø–æ –∂–µ–ª–∞–Ω–∏—é)

## üêõ –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º (Troubleshooting)

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

#### 1. –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –≤ Telegram

**–°–∏–º–ø—Ç–æ–º—ã**: –ë–æ—Ç –Ω–µ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã `/start`

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose ps bot

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏
docker compose logs -f bot

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å webhook (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
curl https://api.telegram.org/bot${BOT_TOKEN}/getWebhookInfo
```

**–†–µ—à–µ–Ω–∏—è**:
```bash
# 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
docker compose restart bot

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å BOT_TOKEN
docker compose exec bot env | grep BOT_TOKEN

# 3. –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker compose up -d --build bot

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
docker compose exec bot ping -c 3 api.telegram.org
```

#### 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã**: –û—à–∏–±–∫–∏ "connection refused" –≤ –ª–æ–≥–∞—Ö

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å PostgreSQL
docker compose ps db

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs db | tail -50

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏–∑–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker compose exec bot python -c "
from bot.config import load_config
config = load_config()
print(config.database_url)
"
```

**–†–µ—à–µ–Ω–∏—è**:
```bash
# 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ë–î
docker compose restart db

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞—Ä–æ–ª—å –≤ .env
cat .env | grep POSTGRES_PASSWORD

# 3. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞–ø—Ä—è–º—É—é
docker compose exec db psql -U dating -d dating -c "SELECT version();"

# 4. –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å volume (–í–ù–ò–ú–ê–ù–ò–ï: —É–¥–∞–ª–∏—Ç –¥–∞–Ω–Ω—ã–µ!)
docker compose down
docker volume rm dating_postgres_data
docker compose up -d
```

#### 3. –û—à–∏–±–∫–∏ –º–∏–≥—Ä–∞—Ü–∏–π –ë–î

**–°–∏–º–ø—Ç–æ–º—ã**: "alembic.util.exc.CommandError" –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â—É—é –≤–µ—Ä—Å–∏—é
docker compose exec bot alembic current

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
docker compose exec bot alembic history
```

**–†–µ—à–µ–Ω–∏—è**:
```bash
# 1. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker compose exec bot alembic upgrade head

# 2. –ï—Å–ª–∏ –Ω–µ –ø–æ–º–æ–≥–∞–µ—Ç - —Å–±—Ä–æ—Å–∏—Ç—å –¥–æ –Ω–∞—á–∞–ª–∞ –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –∑–∞–Ω–æ–≤–æ
docker compose exec bot alembic downgrade base
docker compose exec bot alembic upgrade head

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã –º–∏–≥—Ä–∞—Ü–∏–π
ls -la migrations/versions/
```

#### 4. Mini App –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã**: –ë–µ–ª—ã–π —ç–∫—Ä–∞–Ω –∏–ª–∏ –æ—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
curl http://localhost/

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ nginx
docker compose logs webapp

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–π–ª—ã
docker compose exec webapp ls -la /usr/share/nginx/html/
```

**–†–µ—à–µ–Ω–∏—è**:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WEBAPP_URL –≤ .env
cat .env | grep WEBAPP_URL

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤–µ–±-—Å–µ—Ä–≤–µ—Ä
docker compose restart webapp

# 3. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –Ω–∞–ø—Ä—è–º—É—é
open http://localhost  # –∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω–∞ –æ—à–∏–±–∫–∏ JavaScript
```

#### 5. SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –Ω–µ –ø–æ–ª—É—á–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã**: HTTPS –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, –æ—à–∏–±–∫–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ Traefik
docker compose logs traefik | grep -i acme

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS
dig +short your-domain.com

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø–æ—Ä—Ç–æ–≤
sudo netstat -tlnp | grep -E '(80|443)'
```

**–†–µ—à–µ–Ω–∏—è**:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DOMAIN –∏ ACME_EMAIL –≤ .env
cat .env | grep -E "DOMAIN|ACME_EMAIL"

# 2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp

# 3. –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–π —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
docker compose down
docker volume rm dating_traefik_certs
docker compose up -d

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DNS A-record
nslookup your-domain.com
```

#### 6. –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ CPU/Memory

**–°–∏–º–ø—Ç–æ–º—ã**: –ú–µ–¥–ª–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞, –∑–∞–≤–∏—Å–∞–Ω–∏—è

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker stats dating_bot_1

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Grafana
open http://localhost:3000
```

**–†–µ—à–µ–Ω–∏—è**:
```bash
# 1. –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç—ã –≤ docker-compose.yml
services:
  bot:
    deploy:
      resources:
        limits:
          cpus: '2.0'
          memory: 2G

# 2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã
docker compose restart

# 3. –û—á–∏—Å—Ç–∏—Ç—å –∫–µ—à (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
docker compose exec bot python -c "from bot.cache import cache; cache.clear()"

# 4. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ë–î
docker compose exec db psql -U dating dating -c "VACUUM ANALYZE;"
```

#### 7. –û—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

**–°–∏–º–ø—Ç–æ–º—ã**: "Unauthorized", "Invalid JWT"

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JWT_SECRET
docker compose exec bot env | grep JWT_SECRET

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞
docker compose logs bot | grep -i "auth\|jwt"
```

**–†–µ—à–µ–Ω–∏—è**:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ JWT_SECRET –∑–∞–¥–∞–Ω –≤ .env
cat .env | grep JWT_SECRET

# 2. –û—á–∏—Å—Ç–∏—Ç—å —Å–µ—Å—Å–∏–∏
docker compose exec bot python -c "
from bot.security import clear_expired_sessions
clear_expired_sessions()
"

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
docker compose restart bot
```

#### 8. –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã**: –û—à–∏–±–∫–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ñ–æ—Ç–æ

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API
curl -X POST http://localhost:8080/api/upload_photo \
  -H "Authorization: Bearer YOUR_TOKEN" \
  -F "photo=@test.jpg"

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker compose logs bot | grep -i photo
```

**–†–µ—à–µ–Ω–∏—è**:
```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã —Ä–∞–∑–º–µ—Ä–∞
cat .env | grep MAX_PHOTO_SIZE

# 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ volume
docker compose exec bot ls -la /app/photos

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ
df -h
docker system df
```

### –õ–æ–≥–∏ –∏ –æ—Ç–ª–∞–¥–∫–∞

#### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
docker compose logs -f bot

# –ü–æ—Å–ª–µ–¥–Ω–∏–µ N —Å—Ç—Ä–æ–∫
docker compose logs --tail=100 bot

# –° –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –º–µ—Ç–∫–∞–º–∏
docker compose logs -f --timestamps bot

# –¢–æ–ª—å–∫–æ –æ—à–∏–±–∫–∏
docker compose logs bot | grep ERROR
```

#### –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å shell –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
docker compose exec bot bash

# –ó–∞–ø—É—Å—Ç–∏—Ç—å Python REPL
docker compose exec bot python

# –í—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É
docker compose exec bot python -c "print('Hello')"
```

#### –û—Ç–ª–∞–¥–∫–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
watch -n 1 'docker compose ps'

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
docker stats

# –ñ–∏–≤—ã–µ –ª–æ–≥–∏ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
docker compose logs -f bot | grep -i error
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–∞–µ—Ç—Å—è:

1. **–°–æ–±–µ—Ä–∏—Ç–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é**:
   ```bash
   # –í–µ—Ä—Å–∏–∏
   docker --version
   docker compose version
   
   # –°—Ç–∞—Ç—É—Å
   docker compose ps
   
   # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   docker compose config
   
   # –õ–æ–≥–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 100 —Å—Ç—Ä–æ–∫)
   docker compose logs --tail=100 > logs.txt
   ```

2. **–°–æ–∑–¥–∞–π—Ç–µ issue** –Ω–∞ GitHub —Å:
   - –û–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
   - –®–∞–≥–∞–º–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
   - –õ–æ–≥–∞–º–∏
   - –í–µ—Ä—Å–∏—è–º–∏ –ü–û

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ issues**:
   - https://github.com/erliona/dating/issues

4. **–û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –≤ Discussions**:
   - https://github.com/erliona/dating/discussions

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞

- **[üìñ –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](README.md)** - –æ–±–∑–æ—Ä –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **[üìä –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞](PROJECT_STATUS.md)** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏ –ø–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
- **[üìù –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π](CHANGELOG.md)** - changelog –≤—Å–µ—Ö –≤–µ—Ä—Å–∏–π
- **[üó∫Ô∏è Roadmap](ROADMAP.md)** - –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- **[üìã –ò–Ω–¥–µ–∫—Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](docs/INDEX.md)** - –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤—Å–µ–º –¥–æ–∫—É–º–µ–Ω—Ç–∞–º

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞](docs/ARCHITECTURE.md)** - –¥–µ—Ç–∞–ª–∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Å–∏—Å—Ç–µ–º—ã
- **[üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](docs/DEPLOYMENT.md)** - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ deployment
- **[üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](docs/TESTING.md)** - –∑–∞–ø—É—Å–∫ –∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤
- **[üì° API Reference](docs/PHOTO_UPLOAD_API.md)** - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **[üíæ –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö](docs/DATA_PERSISTENCE.md)** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –∏ –±—ç–∫–∞–ø—ã

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

- **[ü§ù Contributing](CONTRIBUTING.md)** - –∫–∞–∫ –≤–Ω–µ—Å—Ç–∏ –≤–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
  - –°—Ç–∏–ª—å –∫–æ–¥–∞
  - –ü—Ä–æ—Ü–µ—Å—Å PR
  - Code of conduct

- **[üîí Security](SECURITY.md)** - –ø–æ–ª–∏—Ç–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± —É—è–∑–≤–∏–º–æ—Å—Ç—è—Ö
  - Best practices

### –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã

#### Telegram
- [Telegram Bot API](https://core.telegram.org/bots/api) - –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- [Telegram Mini Apps](https://core.telegram.org/bots/webapps) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ Mini Apps
- [@BotFather](https://t.me/BotFather) - —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–æ–≤

#### –§—Ä–µ–π–º–≤–æ—Ä–∫–∏ –∏ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- [aiogram Documentation](https://docs.aiogram.dev/) - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è aiogram
- [SQLAlchemy](https://docs.sqlalchemy.org/) - ORM –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [FastAPI](https://fastapi.tiangolo.com/) - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è REST API
- [Alembic](https://alembic.sqlalchemy.org/) - –º–∏–≥—Ä–∞—Ü–∏–∏ –ë–î

#### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞
- [Docker Documentation](https://docs.docker.com/) - Docker –∏ Compose
- [Traefik](https://doc.traefik.io/traefik/) - reverse proxy
- [Prometheus](https://prometheus.io/docs/) - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [Grafana](https://grafana.com/docs/) - –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è

### –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- **[GitHub Repository](https://github.com/erliona/dating)** - –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
- **[GitHub Issues](https://github.com/erliona/dating/issues)** - –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã –∏ —Ñ–∏—á–∏
- **[GitHub Discussions](https://github.com/erliona/dating/discussions)** - –≤–æ–ø—Ä–æ—Å—ã –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è
- **[GitHub Actions](https://github.com/erliona/dating/actions)** - CI/CD —Å—Ç–∞—Ç—É—Å

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ú—ã –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –ª—é–±—ã–µ –≤–∫–ª–∞–¥—ã –≤ –ø—Ä–æ–µ–∫—Ç! 

### –ö–∞–∫ –ø–æ–º–æ—á—å

- üêõ **–°–æ–æ–±—â–∏—Ç—å –æ –±–∞–≥–µ** - —Å–æ–∑–¥–∞–π—Ç–µ [issue](https://github.com/erliona/dating/issues)
- üí° **–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é** - –æ—Ç–∫—Ä–æ–π—Ç–µ [discussion](https://github.com/erliona/dating/discussions)
- üìù **–£–ª—É—á—à–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - –æ—Ç–ø—Ä–∞–≤—å—Ç–µ PR
- üíª **–ù–∞–ø–∏—Å–∞—Ç—å –∫–æ–¥** - –∏—Å–ø—Ä–∞–≤—å—Ç–µ –±–∞–≥ –∏–ª–∏ —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ —Ñ–∏—á—É
- ‚≠ê **–ü–æ—Å—Ç–∞–≤–∏—Ç—å –∑–≤–µ–∑–¥—É** - –µ—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –ø–æ–ª–µ–∑–µ–Ω

### –ü—Ä–æ—Ü–µ—Å—Å –∫–æ–Ω—Ç—Ä–∏–±—É—Ü–∏–∏

1. Fork —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
2. –°–æ–∑–¥–∞–π—Ç–µ –≤–µ—Ç–∫—É (`git checkout -b feature/amazing-feature`)
3. –í–Ω–µ—Å–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è
4. –ù–∞–ø–∏—à–∏—Ç–µ/–æ–±–Ω–æ–≤–∏—Ç–µ —Ç–µ—Å—Ç—ã
5. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (`pytest`)
6. Commit –∏–∑–º–µ–Ω–µ–Ω–∏–π (`git commit -m 'Add amazing feature'`)
7. Push –≤ –≤–µ—Ç–∫—É (`git push origin feature/amazing-feature`)
8. –û—Ç–∫—Ä–æ–π—Ç–µ Pull Request

–ü–æ–¥—Ä–æ–±–Ω–µ–µ: [CONTRIBUTING.md](CONTRIBUTING.md)

### –ü—Ä–∞–≤–∏–ª–∞

- ‚úÖ –°–ª–µ–¥—É–π—Ç–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É —Å—Ç–∏–ª—é –∫–æ–¥–∞
- ‚úÖ –ü–∏—à–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –û–±–Ω–æ–≤–ª—è–π—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é
- ‚úÖ –û–¥–Ω–∞ —Ñ–∏—á–∞ = –æ–¥–∏–Ω PR
- ‚úÖ –ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤ PR

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π **MIT License**.

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –≤—ã –º–æ–∂–µ—Ç–µ:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª—è—Ö
- ‚úÖ –ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥
- ‚úÖ –†–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö

–ü—Ä–∏ —É—Å–ª–æ–≤–∏–∏:
- üìù –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–ø–∏—Ä–∞–π—Ç–∞ –∏ –ª–∏—Ü–µ–Ω–∑–∏–∏
- üìù –£–∫–∞–∑–∞–Ω–∏—è –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞

–ü–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º. [LICENSE](LICENSE)

## üí¨ –ü–æ–¥–¥–µ—Ä–∂–∫–∞

### –ü–æ–ª—É—á–∏—Ç—å –ø–æ–º–æ—â—å

- üìñ **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –Ω–∞—á–Ω–∏—Ç–µ —Å [README.md](README.md) –∏ —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞
- üêõ **–ë–∞–≥–∏**: [GitHub Issues](https://github.com/erliona/dating/issues)
- üí¨ **–í–æ–ø—Ä–æ—Å—ã**: [GitHub Discussions](https://github.com/erliona/dating/discussions)
- üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: —Å–º. [SECURITY.md](SECURITY.md)

### –ö–∞–Ω–∞—Ç–ª—ã —Å–≤—è–∑–∏

- GitHub Issues - –±–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã –∏ —Ñ–∏—á–∏-—Ä–µ–∫–≤–µ—Å—Ç—ã
- GitHub Discussions - –æ–±—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—è
- Email - –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (—Å–º. SECURITY.md)

### FAQ

**Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏?**
A: –î–∞, –ø—Ä–æ–µ–∫—Ç –ø–æ–¥ MIT –ª–∏—Ü–µ–Ω–∑–∏–µ–π, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ª—é–±—ã—Ö —Ü–µ–ª—è—Ö.

**Q: –ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—É—é —Ñ—É–Ω–∫—Ü–∏—é?**
A: –°–æ–∑–¥–∞–π—Ç–µ issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–ª–∏ discussion –¥–ª—è –æ–±—Å—É–∂–¥–µ–Ω–∏—è, –∑–∞—Ç–µ–º PR.

**Q: –ï—Å—Ç—å –ª–∏ –¥–µ–º–æ?**
A: –î–µ–º–æ –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è, –Ω–æ –≤—ã –º–æ–∂–µ—Ç–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ –∑–∞ 5 –º–∏–Ω—É—Ç.

**Q: –ö–∞–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É?**
A: –ú–∏–Ω–∏–º—É–º 2 CPU, 4GB RAM, 20GB –¥–∏—Å–∫. –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 4 CPU, 8GB RAM.

**Q: –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –ª–∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ?**
A: –î–∞, –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –±–æ—Ç–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—é –ë–î.

---

## üéâ –ë–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏

–°–ø–∞—Å–∏–±–æ –≤—Å–µ–º –∫–æ–Ω—Ç—Ä–∏–±—å—é—Ç–æ—Ä–∞–º –∏ —Å–æ–æ–±—â–µ—Å—Ç–≤—É –∑–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É –ø—Ä–æ–µ–∫—Ç–∞!

### –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- [Python](https://www.python.org/) - —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è
- [aiogram](https://aiogram.dev/) - Telegram Bot framework
- [SQLAlchemy](https://www.sqlalchemy.org/) - ORM
- [PostgreSQL](https://www.postgresql.org/) - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- [Docker](https://www.docker.com/) - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- [Traefik](https://traefik.io/) - reverse proxy
- [Grafana](https://grafana.com/) - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- [Prometheus](https://prometheus.io/) - –º–µ—Ç—Ä–∏–∫–∏

---

**–°–¥–µ–ª–∞–Ω–æ —Å ‚ù§Ô∏è –¥–ª—è —Å–æ–æ–±—â–µ—Å—Ç–≤–∞**

*–ï—Å–ª–∏ –ø—Ä–æ–µ–∫—Ç –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–ª–µ–∑–Ω—ã–º, –ø–æ—Å—Ç–∞–≤—å—Ç–µ ‚≠ê –Ω–∞ GitHub!*

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**: 2.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –Ø–Ω–≤–∞—Ä—å 2025  
**–°—Ç–∞—Ç—É—Å**: Production Ready
